 <style>body {
     font-family: 'Poppins', sans-serif;
     background-color: #f3f4f6;
 }

 details>summary {
     list-style: none;
 }

 details>summary::-webkit-details-marker {
     display: none;
 }

 .contact-link {
     color: #d9463f;
     text-decoration: underline;
     font-weight: 500;
 }

 .dark .contact-link {
     color: #FACC15;
 }

 .contact-link:hover {
     color: #b91c1c;
 }

 .dark .contact-link:hover {
     color: #ef4444;
 }

 @keyframes pulse {

     0%,
     100% {
         opacity: 1;
     }

     50% {
         opacity: 0.75;
     }
 }

 .status-pulse {
     animation: pulse 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
 }

 details[open]>summary {
     border-bottom: 1px solid #e5e7eb;
 }

 .dark details[open]>summary {
     border-bottom-color: #374151;
 }

 .chevron-icon {
     transition: transform 0.3s ease-in-out;
 }

 details[open] .chevron-icon {
     transform: rotate(90deg);
 }

 .menu-link-active {
     background-color: #fef2f2;
     border-left: 4px solid #dc2626;
     font-weight: 600;
     color: #dc2626;
 }

 .dark .menu-link-active {
     background-color: rgba(153, 27, 27, 0.3);
     color: #f87171;
 }

 /* --- ESTILOS ORGANIGRAMA --- */
 .org-chart-container {
     text-align: center;
 }

 .org-node {
     display: inline-block;
     vertical-align: top;
     position: relative;
     padding: 1.25rem;
     margin: 0 1rem 3rem 1rem;
     background-color: #fff;
     border: 1px solid #e5e7eb;
     border-top: 5px solid #dc2626;
     border-radius: 8px;
     box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
     min-width: 220px;
 }

 .dark .org-node {
     background-color: #1f2937;
     border-color: #374151;
 }

 .org-node .name {
     font-size: 1.125rem;
     font-weight: 700;
     color: #111827;
 }

 .dark .org-node .name {
     color: #fff;
 }

 .org-node .role {
     font-size: 0.875rem;
     font-weight: 500;
     color: #dc2626;
 }

 .org-node .funciones {
     font-size: 0.75rem;
     color: #6b7280;
     margin-top: 0.5rem;
     border-top: 1px dashed #e5e7eb;
     padding-top: 0.5rem;
     text-align: left;
 }

 .dark .org-node .funciones {
     color: #9ca3af;
     border-color: #4b5563;
 }

 .org-children {
     display: flex;
     justify-content: center;
     flex-wrap: wrap;
     position: relative;
     margin-top: 3rem;
 }

 .org-node::before {
     content: '';
     position: absolute;
     top: -1.5rem;
     left: 50%;
     width: 2px;
     height: 1.5rem;
     background-color: #d1d5db;
     transform: translateX(-50%);
 }

 .org-chart-container>.org-node-wrapper>.org-node::before {
     display: none;
 }

 .org-children::before {
     content: '';
     position: absolute;
     top: -1.5rem;
     left: 10%;
     width: 80%;
     height: 2px;
     background-color: #d1d5db;
 }

 .org-children .org-node .org-children {
     display: block;
     margin-top: 1rem;
     padding-top: 1rem;
     border-top: 2px solid #e5e7eb;
 }

 .dark .org-children .org-node .org-children {
     border-top-color: #374151;
 }

 .org-children .org-node .org-children::before {
     display: none;
 }

 .org-children .org-node .org-children .org-node {
     margin-left: 0;
     margin-right: 0;
     margin-bottom: 1rem;
 }

 .org-children .org-node .org-children .org-node:last-child {
     margin-bottom: 0;
 }

 .org-children .org-node .org-children .org-node::before {
     top: -1rem;
     height: 1rem;
 }

 /* --- ESTILOS PARA EL MÓDULO DE GUÍA DE DERIVACIÓN --- */
 .tab-button {
     transition: all 0.3s ease;
     border-bottom: 4px solid transparent;
 }

 .tab-button.active {
     border-bottom-color: #dc2626;
     color: #111827;
 }

 .dark .tab-button.active {
     color: #f9fafb;
 }

 .tab-content {
     display: none;
 }

 .tab-content.active {
     display: block;
 }

 .result-card-guia {
     transition: all 0.4s ease-in-out;
     opacity: 0;
     transform: translateY(20px);
     display: none;
 }

 .result-card-guia.visible {
     opacity: 1;
     transform: translateY(0);
     display: block;
 }

 .criticidad-dot {
     width: 12px;
     height: 12px;
     border-radius: 50%;
     margin-right: 8px;
     flex-shrink: 0;
 }

 #panel-guia select {
     -webkit-appearance: none;
     -moz-appearance: none;
     appearance: none;
 }

 .category-item {
     transition: all 0.2s ease;
 }

 .category-item.active {
     background-color: #dc2626;
     color: white;
 }

 .dark .category-item.active {
     background-color: #ef4444;
 }

 .prose ul {
     list-style-type: disc;
     padding-left: 1.5rem;
 }

 .prose li {
     margin-bottom: 0.5rem;
 }

 /* --- ESTILOS PARA AGENTE EN TURNO --- */
 @keyframes glowing-border {
     0% {
         box-shadow: 0 0 3px #10B981, inset 0 0 3px #10B981;
     }

     50% {
         box-shadow: 0 0 12px #34D399, inset 0 0 12px #34D399;
     }

     100% {
         box-shadow: 0 0 3px #10B981, inset 0 0 3px #10B981;
     }
 }

 .agent-on-duty {
     border-color: #10B981 !important;
     /* green-500 */
     animation: glowing-border 2.5s ease-in-out infinite;
 }

 </style>< !-- BEGIN: Organigrama 2025 VF (namespaced) --><style>
 /*
        ==============================================
        PROYECTO: ORGANIGRAMA - VERSIÓN FINAL CORREGIDA
        AUTOR: DAVOO
        DESCRIPCIÓN: Implementación de líneas jerárquicas estáticas con CSS.
        ==============================================
        */

 .organigrama-vf {
     --dia-red: #e3061d;
     --dia-red-dark: #a6281f;
     --dia-red-orange: #e94f35;
     --dia-black: #2c3e50;
     --dia-gray-dark: #34495e;
     --dia-gray-medium: #95a5a6;
     --dia-gray-light: #ecf0f1;
     --dia-white: #ffffff;
     --dia-background: #f4f7f9;
     --font-primary: 'Montserrat', sans-serif;
     --font-secondary: 'Abril+Fatface', cursive;
     --font-tertiary: 'Satisfy', cursive;
     --border-radius: 0.75rem;
     --transition-smooth: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
     --line-color: #d1d5db;
     /* gray-300 */
 }

 @keyframes fadeIn {
     from {
         opacity: 0;
         transform: translateY(10px);
     }

     to {
         opacity: 1;
         transform: translateY(0);
     }
 }

 .organigrama-vf body {
     font-family: var(--font-primary);
     background-color: var(--dia-background);
     color: var(--dia-gray-dark);
     -webkit-font-smoothing: antialiased;
     -moz-osx-font-smoothing: grayscale;
 }

 .organigrama-vf main {
     animation: fadeIn 0.8s ease-out;
 }

 .organigrama-vf header .logo-container {
     background: linear-gradient(135deg, var(--dia-red), var(--dia-red-dark));
     color: var(--dia-white);
     font-weight: 700;
     font-size: 2rem;
     border-radius: var(--border-radius);
     padding: 0.5rem 1.5rem;
     box-shadow: 0 10px 20px rgba(227, 6, 29, 0.2);
     display: inline-block;
     margin-bottom: 1.5rem;
 }

 .organigrama-vf header h1 {
     font-family: var(--font-primary);
     font-size: 2.5rem;
     letter-spacing: -1px;
     color: var(--dia-black);
 }

 .organigrama-vf .tabs-nav {
     border-bottom: 2px solid var(--dia-gray-light);
 }

 .organigrama-vf .tab-button {
     padding: 1rem 1.5rem;
     font-weight: 500;
     font-size: 1rem;
     color: var(--dia-gray-medium);
     background: none;
     border: none;
     border-bottom: 3px solid transparent;
     cursor: pointer;
     transition: var(--transition-smooth);
     margin-right: 0.25rem;
     white-space: nowrap;
 }

 .organigrama-vf .tab-button:hover {
     color: var(--dia-red-orange);
     background-color: rgba(227, 6, 29, 0.05);
 }

 .organigrama-vf .tab-button.active {
     color: var(--dia-red);
     font-weight: 700;
     border-bottom-color: var(--dia-red);
 }

 .organigrama-vf .tab-content {
     background-color: var(--dia-white);
     border: 1px solid var(--dia-gray-light);
     border-top: none;
     border-radius: 0 0 var(--border-radius) var(--border-radius);
     padding: 2.5rem;
     box-shadow: 0 4px 50px rgba(0, 0, 0, 0.05);
 }

 .organigrama-vf .tab-content h2 {
     font-family: var(--font-secondary);
     font-size: 2.25rem;
     color: var(--dia-black);
     margin-bottom: 2rem;
 }

 .organigrama-vf .card {
     background-color: var(--dia-white);
     border: 1px solid var(--dia-gray-light);
     border-top: 4px solid;
     padding: 1.5rem;
     border-radius: var(--border-radius);
     box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
     width: 260px;
     text-align: center;
     transition: var(--transition-smooth);
     position: relative;
     cursor: pointer;
     margin: 0 auto;
     display: inline-block;
 }

 .organigrama-vf .card:hover {
     transform: translateY(-8px) scale(1.02);
     box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
     border-color: var(--dia-red-orange) !important;
 }

 .organigrama-vf .card-name {
     font-family: var(--font-primary);
     font-weight: 700;
     font-size: 1.25rem;
     color: var(--dia-black);
     margin-bottom: 0.25rem;
 }

 .organigrama-vf .card-role {
     font-family: var(--font-primary);
     font-weight: 500;
     font-size: 0.9rem;
     color: var(--dia-gray-medium);
 }

 .organigrama-vf .card.level-0 {
     border-top-color: var(--dia-red);
 }

 .card.level-1 {
     border-top-color: var(--dia-black);
 }

 .organigrama-vf .card.level-2 {
     border-top-color: var(--dia-gray-dark);
 }

 .card.level-3 {
     border-top-color: var(--dia-gray-medium);
 }

 .organigrama-vf .org-chart-container {
     overflow-x: auto;
     padding-bottom: 1rem;
     text-align: center;
 }

 .organigrama-vf .org-chart {
     display: inline-block;
 }

 /* --- LÍNEAS JERÁRQUICAS ESTÁTICAS CON CSS (NUEVA SOLUCIÓN) --- */
 .organigrama-vf .org-chart ul,
 .organigrama-vf .org-chart li {
     list-style-type: none;
     margin: 0;
     padding: 0;
     position: relative;
 }

 .organigrama-vf .org-chart ul {
     padding-top: 40px;
 }

 .organigrama-vf .org-chart li {
     padding: 40px 15px 0 15px;
     display: table-cell;
     vertical-align: top;
 }

 /* Líneas conectoras */
 .organigrama-vf .org-chart li::before,
 .organigrama-vf .org-chart li::after {
     content: '';
     position: absolute;
     top: 0;
     right: 50%;
     border-top: 2px solid var(--line-color);
     width: 50%;
     height: 40px;
 }

 .organigrama-vf .org-chart li::after {
     right: auto;
     left: 50%;
     border-left: 2px solid var(--line-color);
 }

 /* Ocultar conectores donde no son necesarios */
 .organigrama-vf .org-chart li:only-child {
     padding-top: 0;
 }

 .organigrama-vf .org-chart li:only-child::before,
 .organigrama-vf .org-chart li:only-child::after {
     display: none;
 }

 .organigrama-vf .org-chart li:first-child::before,
 .organigrama-vf .org-chart li:last-child::after {
     border: 0 none;
 }

 .organigrama-vf .org-chart li:last-child::before {
     border-right: 2px solid var(--line-color);
     border-radius: 0 5px 0 0;
 }

 .organigrama-vf .org-chart li:first-child::after {
     border-radius: 5px 0 0 0;
 }

 /* Línea vertical para sub-niveles */
 .organigrama-vf .org-chart ul ul::before {
     content: '';
     position: absolute;
     top: 0;
     left: 50%;
     width: 0;
     height: 40px;
     border-left: 2px solid var(--line-color);
 }

 /* Ocultar línea para el primer nivel (raíz) */
 .organigrama-vf .org-chart>ul>li::before,
 .organigrama-vf .org-chart>ul>li::after {
     display: none;
 }

 /* --- FIN DE LA SOLUCIÓN DE LÍNEAS ESTÁTICAS --- */

 .organigrama-vf .modal-overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background-color: rgba(44, 62, 80, 0.85);
     backdrop-filter: blur(5px);
     display: flex;
     justify-content: center;
     align-items: center;
     z-index: 50;
     opacity: 0;
     visibility: hidden;
     transition: opacity 0.3s ease, visibility 0s 0.3s linear;
 }

 .organigrama-vf .modal-overlay.active {
     opacity: 1;
     visibility: visible;
     transition-delay: 0s;
 }

 .organigrama-vf .modal-content {
     background-color: var(--dia-white);
     padding: 3rem;
     border-radius: var(--border-radius);
     width: 90%;
     max-width: 650px;
     position: relative;
     box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
     transform: scale(0.95);
     transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 }

 .organigrama-vf .modal-overlay.active .modal-content {
     transform: scale(1);
 }

 .organigrama-vf #modal-title {
     font-family: var(--font-secondary);
     color: var(--dia-black);
     font-size: 2.5rem;
 }

 .organigrama-vf #modal-role {
     font-family: var(--font-tertiary);
     color: var(--dia-red);
     font-size: 2rem;
     margin-bottom: 1.5rem;
     margin-top: 0.25rem;
     display: block;
 }

 .organigrama-vf .modal-close-btn {
     position: absolute;
     top: 1.5rem;
     right: 1.5rem;
     color: var(--dia-gray-medium);
     transition: var(--transition-smooth);
     background: none;
     border: none;
     cursor: pointer;
 }

 .organigrama-vf .modal-close-btn:hover {
     color: var(--dia-red);
     transform: rotate(90deg);
 }

 .organigrama-vf .text-red-600 {
     color: var(--dia-red);
 }

 .organigrama-vf .text-orange-600 {
     color: var(--dia-red-orange);
 }

 .organigrama-vf .text-yellow-600 {
     color: #f59e0b;
 }

 .organigrama-vf .text-green-600 {
     color: #16a34a;
 }


 /* Fallback visibility for tabs (namespaced) */
 .organigrama-vf .tab-content {
     display: block;
 }

 .organigrama-vf .tab-content.hidden {
     display: none !important;
 }

 /* Funciones con saltos de línea */
 .organigrama-vf .modal-body p {
     margin: 0.25rem 0;
 }

 .org-node .funciones>div {
     margin: 0.15rem 0;
 }

 </style>< !-- END: Organigrama 2025 VF (namespaced) --><style>
 /* === DAVOO Design Upgrade Pack (non-destructive) ===
   Respeta colores y tipografías existentes.
   Solo estiliza por encima con clases/selectores ya presentes.
====================================================== */

 /* Tokens (usan tus variables si existen) */
 :root {
     --brand: var(--dia-red);
     --brand-600: var(--dia-red-dark, #be123c);
     --ink: var(--ink, #111827);
     --muted: var(--muted, #6b7280);
     --panel-bg: var(--panel-bg, #ffffff);
     --surface: var(--surface, #ffffff);
     --soft: rgba(17, 24, 39, 0.04);
     /* Davoo patch (escala de marca) */
     --brand-50: color-mix(in oklab, var(--brand), white 92%);
     --brand-100: color-mix(in oklab, var(--brand), white 85%);
     --brand-600: var(--brand-600, var(--dia-red-dark, #be123c));
     --brand-700: color-mix(in oklab, var(--brand), black 30%);
 }

 /* Layout general */
 main .content-panel {
     max-width: 1200px;
     margin-inline: auto;
     padding-inline: clamp(12px, 2vw, 24px);
 }

 /* Títulos y aire */
 .content-panel header h1 {
     line-height: 1.15;
     letter-spacing: .2px;
 }

 .content-panel header p {
     color: var(--muted);
 }

 /* Menú lateral: estado activo reforzado */
 #main-menu .menu-link.active,
 #main-menu .menu-link[aria-current="page"] {
     background: linear-gradient(90deg, var(--soft), transparent);
     border-left: 3px solid var(--brand);
 }

 /* Tabs (barra superior dentro de secciones) */
 .organigrama-vf .tab-strip {
     position: sticky;
     top: 0;
     z-index: 10;
     backdrop-filter: blur(4px);
 }

 .organigrama-vf .tab-button {
     position: relative;
     transition: color .15s ease;
     outline: none;
 }

 .organigrama-vf .tab-button.active {
     color: var(--brand);
     font-weight: 600;
 }

 .organigrama-vf .tab-button.active::after {
     content: "";
     position: absolute;
     left: 0;
     right: 0;
     bottom: -8px;
     height: 2px;
     background: var(--brand);
     border-radius: 2px;
 }

 /* Sub-toggle Organigrama / Matriz */
 .organigrama-vf .vf-crit-toolbar {
     display: flex;
     gap: .5rem;
     align-items: center;
     justify-content: flex-end;
 }

 .organigrama-vf .vf-crit-toolbar>button {
     border: 1px solid rgba(0, 0, 0, .08);
     padding: .35rem .65rem;
     border-radius: 9999px;
     font-size: .85rem;
     line-height: 1;
     background: #fff;
 }

 .organigrama-vf .vf-crit-toolbar>button:hover {
     box-shadow: 0 1px 0 rgba(0, 0, 0, .05);
 }

 .organigrama-vf .vf-crit-toolbar>button.ring-1 {
     border-color: var(--brand);
     box-shadow: inset 0 0 0 1px var(--brand);
 }

 /* Tarjetas de organigrama */
 .organigrama-vf .org-chart .card {
     box-shadow: 0 1px 3px rgba(0, 0, 0, .06), 0 1px 2px rgba(0, 0, 0, .04);
     border-radius: 12px;
     transition: transform .12s ease, box-shadow .12s ease;
 }

 .organigrama-vf .org-chart .card:hover {
     transform: translateY(-1px);
     box-shadow: 0 8px 20px rgba(0, 0, 0, .06);
 }

 .organigrama-vf .org-chart .card .card-name {
     font-weight: 700;
     color: var(--ink);
 }

 .organigrama-vf .org-chart .card .card-role {
     color: var(--muted);
 }

 /* Líneas jerárquicas más finas y siempre visibles */
 .organigrama-vf .org-chart ul {
     position: relative;
 }

 .organigrama-vf .org-chart ul::before,
 .organigrama-vf .org-chart li::before,
 .organigrama-vf .org-chart li::after {
     background-color: rgba(0, 0, 0, .12) !important;
     opacity: 1 !important;
 }

 /* Contenedor con pan/zoom */
 .organigrama-vf .org-chart {
     transform-origin: 0 0;
     will-change: transform;
     position: relative;
 }

 .organigrama-vf .org-zoom-toolbar {
     position: sticky;
     top: 8px;
     z-index: 20;
     display: flex;
     gap: .4rem;
     justify-content: flex-end;
 }

 .organigrama-vf .org-zoom-toolbar button {
     background: var(--surface);
     border: 1px solid rgba(0, 0, 0, .06);
     border-radius: 10px;
     padding: .35rem .6rem;
     font-weight: 600;
 }

 .organigrama-vf .org-zoom-toolbar button:hover {
     background: #fff;
     box-shadow: 0 1px 0 rgba(0, 0, 0, .06);
 }

 /* Tablas – encabezado sticky + zebra */
 .organigrama-vf table thead th {
     position: sticky;
     top: 0;
     z-index: 5;
     background: linear-gradient(180deg, #fff, #fff0);
     backdrop-filter: blur(2px);
 }

 .organigrama-vf table tbody tr:nth-child(odd) {
     background-color: rgba(0, 0, 0, .015);
 }

 .organigrama-vf table tbody tr:hover {
     background-color: rgba(0, 0, 0, .04);
 }

 /* Modal: tamaño y tipografía cómoda */
 .organigrama-vf #info-modal .modal-content {
     max-width: 780px;
     line-height: 1.55;
 }

 .organigrama-vf .vf-section-title {
     margin-top: .75rem;
     margin-bottom: .5rem;
     font-weight: 800;
     text-transform: uppercase;
     letter-spacing: .03em;
     color: #374151;
 }

 /* Espaciado vertical consistente */
 .content-panel>*+* {
     margin-top: clamp(12px, 2vw, 20px);
 }

 /* Estados de carga (skeleton) */
 .skel {
     background: linear-gradient(90deg, rgba(0, 0, 0, .06), rgba(0, 0, 0, .03), rgba(0, 0, 0, .06));
     background-size: 200% 100%;
     animation: skel 1.2s ease-in-out infinite;
     border-radius: 8px;
 }

 @keyframes skel {
     0% {
         background-position: 200% 0;
     }

     100% {
         background-position: -200% 0;
     }
 }

 .skel-line {
     height: 12px;
     margin: 8px 0;
 }

 </style><style>

 /* === DAVOO Pro Pack (UI Enhancements) =======================================
   Respeta paleta y tipografías de la empresa. Solo añade utilidades.
==============================================================================*/
 :root {
     --brand: var(--dia-red, #e11d48);
     --ink: var(--ink, #111827);
     --muted: var(--muted, #6b7280);
     --surface: var(--surface, #ffffff);
     --soft: rgba(17, 24, 39, .05);
 }

 /* Chips de filtro */
 .dv-chips {
     display: flex;
     flex-wrap: wrap;
     gap: .5rem;
     align-items: center;
 }

 .dv-chip {
     display: inline-flex;
     align-items: center;
     gap: .4rem;
     padding: .35rem .65rem;
     border-radius: 9999px;
     background: #fff;
     border: 1px solid rgba(0, 0, 0, .06);
     font-size: .85rem;
     line-height: 1;
     cursor: pointer;
     user-select: none;
 }

 .dv-chip[aria-pressed="true"] {
     background: var(--soft);
     box-shadow: inset 0 0 0 1px var(--brand);
     border-color: var(--brand);
     color: var(--ink);
 }

 .dv-chip .dot {
     width: .5rem;
     height: .5rem;
     border-radius: 9999px;
     background: currentColor;
     display: inline-block;
 }

 .dv-chip.crit-Emergencia {
     color: var(--brand);
 }

 .dv-chip.crit-Crítico {
     color: #b91c1c;
 }

 .dv-chip.crit-Media {
     color: #d97706;
 }

 .dv-chip.crit-Baja {
     color: #059669;
 }

 /* Barra de acciones de tabla */
 .dv-toolbar {
     display: flex;
     flex-wrap: wrap;
     gap: .5rem 1rem;
     align-items: center;
     justify-content: space-between;
     margin: .75rem 0;
 }

 .dv-actions {
     display: flex;
     gap: .5rem;
     align-items: center;
 }

 .dv-btn {
     background: #fff;
     border: 1px solid rgba(0, 0, 0, .06);
     padding: .4rem .7rem;
     border-radius: 10px;
     font-weight: 600;
     cursor: pointer;
 }

 .dv-btn:hover {
     box-shadow: 0 1px 0 rgba(0, 0, 0, .06);
 }

 .dv-btn.primary {
     border-color: var(--brand);
     box-shadow: inset 0 0 0 1px var(--brand);
 }

 /* Estado vacío de tabla */
 .dv-empty {
     text-align: center;
     padding: 1.5rem;
     color: var(--muted);
 }

 /* Toasts */
 .dv-toast-wrap {
     position: fixed;
     right: 12px;
     bottom: 12px;
     display: grid;
     gap: .5rem;
     z-index: 9999;
 }

 .dv-toast {
     background: #111827;
     color: #fff;
     padding: .6rem .9rem;
     border-radius: 10px;
     box-shadow: 0 6px 20px rgba(0, 0, 0, .25);
 }

 .dv-toast button {
     margin-left: .6rem;
     background: transparent;
     border: 0;
     color: #fff;
     text-decoration: underline;
     cursor: pointer;
 }

 /* Command Palette */
 .dv-kbar {
     position: fixed;
     inset: 0;
     background: rgba(0, 0, 0, .4);
     display: none;
     align-items: flex-start;
     justify-content: center;
     padding-top: 10vh;
     z-index: 9998;
 }

 .dv-kbar.active {
     display: flex;
 }

 .dv-kbar .panel {
     width: min(720px, 92vw);
     background: #fff;
     border-radius: 12px;
     box-shadow: 0 20px 60px rgba(0, 0, 0, .3);
     overflow: hidden;
 }

 .dv-kbar header {
     padding: .8rem 1rem;
     border-bottom: 1px solid rgba(0, 0, 0, .06);
     display: flex;
     gap: .6rem;
     align-items: center;
 }

 .dv-kbar input {
     width: 100%;
     font-size: 1rem;
     padding: .55rem .7rem;
     border: 1px solid rgba(0, 0, 0, .08);
     border-radius: 8px;
     outline: none;
 }

 .dv-kbar ul {
     max-height: 50vh;
     overflow: auto;
 }

 .dv-kbar li {
     padding: .65rem 1rem;
     border-top: 1px solid rgba(0, 0, 0, .04);
     cursor: pointer;
 }

 .dv-kbar li.active {
     background: var(--soft);
 }

 .dv-kbar small {
     color: var(--muted);
 }

 /* Focus ring unificado */
 *:focus-visible {
     outline: 2px solid var(--brand);
     outline-offset: 2px;
     border-radius: 6px;
 }

 </style><style>

 /* ===== Pro Pack v2: Mini Gantt + Focus Path ================================= */
 .dv-gantt {
     margin-top: 1rem;
     background: #fff;
     border: 1px solid rgba(0, 0, 0, .06);
     border-radius: 12px;
     overflow: auto;
 }

 .dv-gantt .head {
     display: grid;
     grid-template-columns: 180px 1fr;
     align-items: center;
     gap: 0;
     border-bottom: 1px solid rgba(0, 0, 0, .06);
 }

 .dv-gantt .head h3 {
     padding: .8rem 1rem;
     font-weight: 800;
 }

 .dv-gantt .scale {
     display: flex;
     gap: 0;
     padding: .5rem .5rem;
 }

 .dv-gantt .scale .tick {
     flex: 1;
     text-align: center;
     font-size: .8rem;
     color: #6b7280;
 }

 .dv-gantt .row {
     display: grid;
     grid-template-columns: 180px 1fr;
     border-top: 1px solid rgba(0, 0, 0, .04);
 }

 .dv-gantt .lane {
     padding: .6rem 1rem;
     font-weight: 600;
 }

 .dv-gantt .track {
     position: relative;
     min-width: 720px;
     height: 38px;
 }

 .dv-gantt .task {
     position: absolute;
     top: 6px;
     height: 26px;
     border-radius: 8px;
     background: var(--soft);
     border: 1px solid rgba(0, 0, 0, .1);
     display: flex;
     align-items: center;
     padding: 0 .5rem;
     font-weight: 600;
     white-space: nowrap;
 }

 .dv-gantt .task[data-severity="Emergencia"] {
     background: rgba(225, 29, 72, .12);
     border-color: var(--brand);
 }

 .dv-gantt .task[data-severity="Crítico"] {
     background: rgba(185, 28, 28, .12);
     border-color: #b91c1c;
 }

 .dv-gantt .task[data-severity="Media"] {
     background: rgba(217, 119, 6, .12);
     border-color: #d97706;
 }

 .dv-gantt .task[data-severity="Baja"] {
     background: rgba(5, 150, 105, .12);
     border-color: #059669;
 }

 /* Focus Path */
 .dv-org-search {
     display: flex;
     gap: .5rem;
     align-items: center;
     margin: .75rem 0;
 }

 .dv-org-search input {
     width: 100%;
     padding: .55rem .7rem;
     border: 1px solid rgba(0, 0, 0, .08);
     border-radius: 10px;
 }

 .dv-org-tools {
     display: flex;
     gap: .5rem;
 }

 .org-dim {
     opacity: .25;
     transition: opacity .15s ease;
 }

 .org-focus {
     outline: 2px solid var(--brand);
     outline-offset: 2px;
     border-radius: 12px;
     background: rgba(225, 29, 72, .04);
 }

 </style><style>

 /* === Pro Pack v3: Organigrama – Colapsar Niveles + Minimap ================== */
 .dv-org-ops {
     display: flex;
     gap: .5rem;
     align-items: center;
     flex-wrap: wrap;
     margin: .5rem 0 1rem;
 }

 .dv-seg {
     display: inline-flex;
     border: 1px solid rgba(0, 0, 0, .08);
     border-radius: 10px;
     overflow: hidden;
     background: #fff;
 }

 .dv-seg button {
     padding: .35rem .6rem;
     border: 0;
     background: #fff;
     cursor: pointer;
     font-weight: 600;
 }

 .dv-seg button[aria-pressed="true"] {
     background: var(--soft);
     box-shadow: inset 0 0 0 1px var(--brand);
 }

 .dv-minimap {
     position: sticky;
     bottom: 12px;
     margin-left: auto;
     width: 220px;
     height: 140px;
     background: #fff;
     border: 1px solid rgba(0, 0, 0, .08);
     border-radius: 10px;
     box-shadow: 0 6px 20px rgba(0, 0, 0, .06);
     overflow: hidden;
 }

 .dv-minimap canvas {
     width: 100%;
     height: 100%;
     display: block;
 }

 .dv-minimap .title {
     font-size: .75rem;
     color: #6b7280;
     padding: .25rem .5rem;
     border-bottom: 1px solid rgba(0, 0, 0, .06);
 }

 .dv-minimap .wrap {
     position: relative;
     width: 100%;
     height: calc(100% - 22px);
 }

 .dv-minimap .hint {
     position: absolute;
     right: 6px;
     bottom: 4px;
     font-size: .7rem;
     color: #9ca3af;
 }

 /* Hide helper class for collapsed nodes */
 .org-hidden {
     display: none !important;
 }

 </style><style id="hide-minimap-override">.dv-minimap {
     display: none !important;
     visibility: hidden !important;
 }

 </style><style>

 /* ssgg-visual-v11: subtle connectors + dynamic centering of Juan Basini */
 #ssgg-chart-container {
     position: relative;
 }

 .ssgg-aux-layer {
     position: absolute;
     inset: 0;
     pointer-events: none;
     z-index: 2;
 }

 .ssgg-aux-layer svg {
     width: 100%;
     height: 100%;
     display: block;
 }

 .ssgg-aux-path {
     stroke: #e5e7eb;
     stroke-width: 2;
     fill: none;
     stroke-linecap: round;
 }

 .card[data-shift-x] {
     position: relative;
     left: var(--shift-x, 0px);
 }

 </style><style>

 /* ssgg-visual-v12: use CSS transforms (no layout reflow) so native grey rails never move */
 #ssgg-chart-container {
     position: relative;
 }

 .ssgg-aux-layer {
     position: absolute;
     inset: 0;
     pointer-events: none;
     z-index: 2;
 }

 .ssgg-aux-layer svg {
     width: 100%;
     height: 100%;
     display: block;
 }

 .ssgg-aux-path {
     stroke: #e5e7eb;
     stroke-width: 2;
     fill: none;
     stroke-linecap: round;
 }

 /* Only visual offsets; layout stays intact */
 .card.ssgg-shift {
     transform: translate(var(--shift-x, 0px), var(--shift-y, 0px));
     will-change: transform;
 }

 </style><style>

 /* ssgg-visual-v13: transforms alignment + scroll-safe redraw */
 #ssgg-chart-container {
     position: relative;
 }

 .ssgg-aux-layer {
     position: absolute;
     inset: 0;
     pointer-events: none;
     z-index: 2;
 }

 .ssgg-aux-layer svg {
     width: 100%;
     height: 100%;
     display: block;
 }

 .ssgg-aux-path {
     stroke: #e5e7eb;
     stroke-width: 2;
     fill: none;
     stroke-linecap: round;
 }

 .card.ssgg-shift {
     transform: translate(var(--shift-x, 0px), var(--shift-y, 0px));
     will-change: transform;
 }

 </style><style id="oncall-look-v3">

 /* En-turno: borde visible sí o sí (a prueba de overrides) */
 .agent-on-duty {
     position: relative;
     outline: 2px solid #22c55e !important;
     /* contorno visible sin reflow */
     outline-offset: 0 !important;
     border-color: #22c55e !important;
     /* por si la card usa border */
     box-shadow:
         0 0 0 2px #22c55e,
         0 0 0 6px rgba(34, 197, 94, .18) !important;
     /* halo suave */
     background-clip: padding-box;
     border-radius: inherit;
     z-index: 1;
 }

 /* Si el tema clipea sombras en padres con overflow, pintamos un aro encima */
 .agent-on-duty::after {
     content: "";
     pointer-events: none;
     position: absolute;
     inset: -3px;
     /* 2px + 1px margen */
     border-radius: inherit;
     box-shadow:
         0 0 0 2px #22c55e,
         0 0 0 6px rgba(34, 197, 94, .18);
 }

 /* Badge opcional (si se quiere usar) */
 .oncall-badge {
     background: #dcfce7;
     color: #166534;
     border: 1px solid #86efac;
     font-weight: 600;
     border-radius: 9999px;
     padding: 2px 8px;
     font-size: 12px;
     line-height: 1;
 }

 </style><style id="ssgg-shift-fallback">

 /* Fallback: move-only helper if project didn't define .ssgg-shift */
 .ssgg-shift {
     transform: translateX(var(--shift-x, 0)) translateY(var(--shift-y, 0));
     will-change: transform;
 }

 </style><style id="davoo-btn-hover-v2">.btn-primary:hover,
 .btn-primary:focus {
     background: var(--brand-700);
 }

 </style><style id="davoo-contrast-v3">#panel-cronograma .bg-gray-800,
 #panel-cronograma .bg-gray-900 {
     color: #f8fafc;
 }

 #panel-cronograma .bg-gray-800 a,
 #panel-cronograma .bg-gray-900 a {
     color: #ffffff;
     text-decoration: underline;
 }

 #panel-cronograma .bg-gray-800 .text-gray-700,
 #panel-cronograma .bg-gray-900 .text-gray-700 {
     color: #f3f4f6 !important;
 }

 </style><style id="davoo-v4-pack"> :root {
     --brand: var(--brand, var(--dia-red, #E3061D));
     --brand-700: var(--brand-700, color-mix(in oklab, var(--brand), black 30%));
     --success: #16a34a;
     --warning: #f59e0b;
     --danger: #b91c1c;
     --info: #2563eb;
     --ink: #111827;
     --muted: #6b7280;
     --surface: #ffffff;
     --soft: rgba(17, 24, 39, .05);
     --radius: 12px;
     --elev-1: 0 1px 3px rgba(0, 0, 0, .06), 0 1px 2px rgba(0, 0, 0, .04);
     --elev-2: 0 8px 20px rgba(0, 0, 0, .06);
 }

 :focus-visible {
     outline: 2px solid var(--brand);
     outline-offset: 2px;
 }

 .card,
 .panel,
 .module,
 .widget,
 .content-panel,
 .bg-white,
 .dv-card {
     border-radius: var(--radius);
     box-shadow: var(--elev-1);
     background: var(--surface);
 }

 .card:hover,
 .panel:hover,
 .module:hover,
 .widget:hover,
 .dv-card:hover {
     box-shadow: var(--elev-2);
     transform: translateY(-1px);
     transition: box-shadow .2s ease, transform .2s ease;
 }

 #main-menu .menu-link-active,
 aside nav a.active,
 .sidebar nav a.active {
     background: linear-gradient(90deg, var(--soft), transparent);
     border-left: 4px solid var(--brand);
     border-radius: 10px;
 }

 .btn-primary {
     background: var(--brand);
     border-color: var(--brand);
 }

 .btn-primary:hover,
 .btn-primary:focus {
     background: var(--brand-700);
 }

 #panel-consulta input[type="text"],
 #panel-consulta input[type="search"],
 #panel-consulta .search-input {
     border-radius: 9999px;
     box-shadow: var(--elev-2);
 }

 table tbody tr:nth-child(odd) {
     background: rgba(0, 0, 0, 0.015);
 }

 table tbody tr:hover {
     background: var(--soft);
 }

 .badge {
     padding: .2rem .5rem;
     border-radius: 9999px;
     font-weight: 700;
     line-height: 1;
     display: inline-block;
 }

 .badge.critica {
     background: #fee2e2;
     color: #b91c1c
 }

 .badge.urgente {
     background: #ffe4e6;
     color: #ef4444
 }

 .badge.alta {
     background: #fef3c7;
     color: #b45309
 }

 .badge.media {
     background: #fef9c3;
     color: #a16207
 }

 .badge.baja {
     background: #dcfce7;
     color: #166534
 }

 .compact table td,
 .compact table th {
     padding: .4rem .5rem !important;
 }

 </style><style id="davoo-v5-pack">

 /* ================================
 * DAVOO V5 FINISHING KIT (UI only)
 * Respeta colores y tipografía existentes
 * ================================ */
 :root {
     --ease: cubic-bezier(.2, .8, .2, 1);
 }

 /* 1) Tipografía y jerarquía más precisa */
 .content-panel>header h1 {
     letter-spacing: -.02em;
     line-height: 1.15;
 }

 .content-panel>header p {
     letter-spacing: .005em;
 }

 /* 2) Header de sección sticky con blur suave */
 .content-panel>header {
     position: sticky;
     top: 0;
     z-index: 10;
     -webkit-backdrop-filter: blur(4px);
     backdrop-filter: blur(4px);
     background: linear-gradient(0deg, rgba(255, 255, 255, .85), rgba(255, 255, 255, .85));
 }

 .dark .content-panel>header {
     background: linear-gradient(0deg, rgba(17, 24, 39, .75), rgba(17, 24, 39, .75));
 }

 /* 3) Ritmo de espaciado y padding coherente */
 .content-panel>*+* {
     margin-top: clamp(12px, 2.2vw, 24px);
 }

 .card,
 .panel {
     padding: clamp(12px, 1.8vw, 20px);
 }

 /* 4) Sidebar activo tipo pill y área de click cómoda */
 #main-menu .menu-link {
     padding-block: .7rem;
 }

 #main-menu .menu-link-active {
     border-left: 4px solid var(--dia-red, var(--brand, #E3061D));
     background: linear-gradient(90deg, rgba(0, 0, 0, .04), transparent);
     font-weight: 700;
     border-radius: 10px;
 }

 /* 5) Tablas: encabezado con borde, alineación numérica y selección */
 table thead th {
     border-bottom: 1px solid rgba(0, 0, 0, .08);
 }

 td.num {
     text-align: right;
     font-variant-numeric: tabular-nums;
 }

 tr.is-selected {
     background: rgba(0, 0, 0, .06);
 }

 /* 6) Badges de criticidad consistentes y accesibles */
 .badge {
     border: 1px solid currentColor;
     font-weight: 700;
 }

 .badge::before {
     content: "";
     display: inline-block;
     width: .5rem;
     height: .5rem;
     border-radius: 9999px;
     margin-right: .4rem;
     vertical-align: middle;
     background: currentColor;
 }

 /* 7) Skeleton refinado (shimmer) para listas y resultados */
 .skel {
     background: linear-gradient(90deg, rgba(0, 0, 0, .04), rgba(0, 0, 0, .08), rgba(0, 0, 0, .04));
     background-size: 400% 100%;
     animation: skel 1.4s linear infinite;
 }

 @keyframes skel {
     0% {
         background-position: 0 0
     }

     100% {
         background-position: -400% 0
     }
 }

 /* 8) Micro-interacciones uniformes */
 .btn,
 .menu-link,
 .tab-button,
 .card,
 .panel,
 .widget {
     transition: box-shadow .2s var(--ease), transform .2s var(--ease),
         background-color .2s var(--ease), color .2s var(--ease),
         border-color .2s var(--ease);
 }

 /* 9) Organigrama: conectores más finos */
 .organigrama-vf .org-chart li::before,
 .organigrama-vf .org-chart li::after {
     border-color: rgba(0, 0, 0, .12);
 }

 /* Mostrar minimapa si hay altura disponible */
 @media (min-height:800px) {
     .dv-minimap {
         display: block
     }
 }

 /* 10) Dark mode: neutrales más legibles */
 .dark .text-gray-400 {
     color: #9ca3af
 }

 .dark .border-gray-700 {
     border-color: #4b5563
 }

 /* 11) KPIs: números tabulares y targets cómodos */
 [id^="kpi-"] {
     font-variant-numeric: tabular-nums;
 }

 .button,
 .btn,
 .menu-link,
 .tab-button {
     min-height: 44px;
 }

 </style><style id="davoo-v6-pack">

 /* ================================
 * DAVOO V6: World-class polish (UI only)
 * Respeta paleta y tipografía existentes
 * ================================ */
 :root {
     --ease: cubic-bezier(.2, .8, .2, 1);
     --hairline: rgba(0, 0, 0, .08);
     --hairline-dark: rgba(255, 255, 255, .12);
 }

 /* 1) Consolidación visual: ritmo 8px y jerarquía */
 .content-panel>header h1 {
     letter-spacing: -.02em;
     line-height: 1.12;
 }

 .content-panel>header p {
     letter-spacing: .005em;
 }

 .content-panel>*+* {
     margin-top: clamp(12px, 2.2vw, 24px);
 }

 .card,
 .panel {
     padding: clamp(12px, 1.8vw, 20px);
 }

 /* 2) Header sticky con blur y hairline */
 .content-panel>header {
     position: sticky;
     top: 0;
     z-index: 10;
     -webkit-backdrop-filter: blur(5px);
     backdrop-filter: blur(5px);
     background: linear-gradient(0deg, rgba(255, 255, 255, .86), rgba(255, 255, 255, .86));
     border-bottom: 1px solid var(--hairline);
 }

 .dark .content-panel>header {
     background: linear-gradient(0deg, rgba(17, 24, 39, .75), rgba(17, 24, 39, .75));
     border-bottom: 1px solid var(--hairline-dark);
 }

 /* 3) Tablas pro: línea de encabezado, zebra y hover ya en V4/V5; sumo focus-row */
 table thead th {
     border-bottom: 1px solid var(--hairline);
 }

 tr:focus-within {
     outline: 2px solid var(--dia-red, var(--brand, #E3061D));
     outline-offset: -2px;
 }

 /* 4) Densidad global: .compact en <html> o <body> */
 .compact table td,
 .compact table th {
     padding: .42rem .5rem !important;
 }

 .compact .card,
 .compact .panel {
     padding: clamp(8px, 1.2vw, 14px);
 }

 /* 5) Toolbar flotante mínima (density toggle) */
 .dv-density-toggle {
     position: fixed;
     right: 16px;
     bottom: 16px;
     z-index: 50;
     display: inline-flex;
     align-items: center;
     gap: .5rem;
     background: rgba(255, 255, 255, .9);
     -webkit-backdrop-filter: blur(6px);
     backdrop-filter: blur(6px);
     border: 1px solid var(--hairline);
     border-radius: 9999px;
     box-shadow: 0 10px 30px rgba(0, 0, 0, .08);
     padding: .4rem .75rem;
 }

 .dark .dv-density-toggle {
     background: rgba(17, 24, 39, .7);
     border-color: var(--hairline-dark);
 }

 .dv-density-toggle button {
     border: 1px solid currentColor;
     border-radius: 9999px;
     padding: .3rem .7rem;
     font-weight: 700;
     line-height: 1;
     min-height: 36px;
     cursor: pointer;
 }

 .dv-density-toggle .is-active {
     opacity: .9;
     transform: translateY(0);
 }

 .dv-density-toggle .kbd {
     font: inherit;
     font-size: .875em;
     padding: .08rem .4rem;
     border-radius: 6px;
     border: 1px solid var(--hairline);
     background: rgba(0, 0, 0, .04);
 }

 /* 6) Motion accesible y uniforme */
 .btn,
 .menu-link,
 .tab-button,
 .card,
 .panel,
 .widget {
     transition: box-shadow .2s var(--ease), transform .2s var(--ease),
         background-color .2s var(--ease), color .2s var(--ease),
         border-color .2s var(--ease);
 }

 @media (prefers-reduced-motion: reduce) {

     *,
     *::before,
     *::after {
         animation-duration: .001ms !important;
         animation-iteration-count: 1 !important;
         transition-duration: .001ms !important;
         scroll-behavior: auto !important;
     }
 }

 /* 7) Tabs ARIA: foco visible y separación */
 [role="tablist"] [role="tab"]:focus-visible {
     outline: 2px solid var(--dia-red, var(--brand, #E3061D));
     outline-offset: 2px;
 }

 [role="tablist"] {
     border-bottom: 1px solid var(--hairline);
     padding-bottom: .25rem;
     margin-bottom: .75rem;
 }

 /* 8) Hairlines en secciones largas */
 .section-hairline {
     border-top: 1px solid var(--hairline);
     padding-top: .75rem;
     margin-top: .75rem;
 }

 .dark .section-hairline {
     border-color: var(--hairline-dark);
 }

 </style>< !-- DIAMANT: Fixes+Lockup SAFE --><style id="diamant-safe-fixes">

 /* Eliminar punto negro si viene de markers/pseudo-elementos */
 #masthead,
 #masthead * {
     list-style: none;
 }

 #masthead::before,
 #hero-lockup::before,
 #hero-lockup .badge::before {
     content: none !important;
 }

 /* Sidebar pill: tamaño y centrado */
 .dv-sidebar-logo-wrap {
     padding: 20px;
     text-align: center;
     background: #dc2626;
     border-bottom: 1px solid rgba(0, 0, 0, .08);
 }

 .dv-sidebar-pill {
     display: inline-flex;
     align-items: center;
     justify-content: center;
     width: 104px;
     height: 104px;
     background: #fff;
     border-radius: 18px;
     box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);
     border: 1px solid rgba(239, 68, 68, .15);
 }

 .dv-sidebar-pill img {
     max-height: 78%;
     width: auto;
     display: block;
 }

 /* Hero lockup */
 #masthead {
     position: sticky;
     top: 0;
     z-index: 50;
     background: rgba(255, 255, 255, 0.86);
     backdrop-filter: saturate(160%) blur(6px);
     border-bottom: 1px solid rgba(0, 0, 0, 0.06);
     transition: padding .25s ease, box-shadow .25s ease;
 }

 #masthead.scrolled {
     box-shadow: 0 10px 30px -15px rgba(0, 0, 0, .2)
 }

 #hero-lockup {
     display: flex;
     flex-direction: column;
     align-items: center;
     gap: 1rem;
     margin-bottom: 1.25rem;
     position: relative;
 }

 #hero-lockup .badge {
     background: #fff;
     border-radius: 16px;
     box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);
     padding: 8px 12px;
     border: 1px solid rgba(239, 68, 68, .15);
 }

 #hero-lockup .text {
     text-align: center;
 }

 #hero-lockup .badge img {
     height: auto;
     width: auto;
     max-height: clamp(120px, 8.5vw, 220px);
 }

 @media(min-width:768px) {
     #hero-lockup {
         flex-direction: row;
         gap: 1.5rem;
     }

     #hero-lockup .text {
         text-align: left;
     }
 }

 #masthead.shrink #hero-lockup .badge img {
     max-height: 64px !important;
 }

 </style>