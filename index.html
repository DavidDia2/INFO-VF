<!DOCTYPE html>
<html lang="es" class="">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Informacion Nacional - Plataforma Integrada</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
</head>

<body class="antialiased bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200">

  <button id="menu-toggle"
    class="md:hidden fixed top-4 left-4 z-30 p-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-full shadow-lg">
    <svg id="menu-open-icon" class="h-6 w-6 text-gray-800 dark:text-gray-200" fill="none" viewBox="0 0 24 24"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
    </svg>
    <svg id="menu-close-icon" class="h-6 w-6 text-gray-800 dark:text-gray-200 hidden" fill="none" viewBox="0 0 24 24"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </button>

  <div class="flex flex-col md:flex-row min-h-screen">
    <aside id="sidebar"
      class="w-64 bg-white dark:bg-gray-800 shadow-lg flex-shrink-0 transform -translate-x-full md:translate-x-0 fixed md:relative h-full z-20 transition-transform duration-300 ease-in-out">
      <div class="p-6 text-center border-b border-gray-200 dark:border-gray-700 bg-red-600">
        <h1 class="text-2xl font-bold text-white">DIA</h1>
      </div>
      <div class="p-4 flex flex-col justify-between" style="height: calc(100% - 81px);">
        <nav id="main-menu" class="space-y-1">
          <a href="#" data-panel="panel-organigrama-vf"
            class="menu-link flex items-center px-4 py-3 text-gray-700 dark:text-gray-200 rounded-lg">
            <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M3.75 6A2.25 2.25 0 016 3.75h12a2.25 2.25 0 012.25 2.25v0A2.25 2.25 0 0118 8.25H6A2.25 2.25 0 013.75 6z" />
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M3.75 12A2.25 2.25 0 016 9.75h12a2.25 2.25 0 012.25 2.25v0A2.25 2.25 0 0118 14.25H6A2.25 2.25 0 013.75 12z" />
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M3.75 18A2.25 2.25 0 016 15.75h12a2.25 2.25 0 012.25 2.25v0A2.25 2.25 0 0118 20.25H6A2.25 2.25 0 013.75 18z" />
            </svg>
            Organigrama (Interno)
          </a>

          <h2 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider px-4 mb-2">Menú
          </h2>

          <a href="#" data-panel="panel-consulta"
            class="menu-link flex items-center px-4 py-3 text-gray-700 dark:text-gray-200 rounded-lg">
            <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            Consulta Principal
          </a>
          <a href="#" data-panel="panel-prov-zona"
            class="menu-link flex items-center px-4 py-3 text-gray-700 dark:text-gray-200 rounded-lg">
            <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
            Proveedores por Zona
          </a>
          <a href="#" data-panel="panel-prov-contacto"
            class="menu-link flex items-center px-4 py-3 text-gray-700 dark:text-gray-200 rounded-lg">
            <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 6.75z" />
            </svg>
            Proveedores Contacto
          </a>
          <details class="group">
            <summary
              class="flex items-center justify-between px-4 py-3 font-semibold text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 cursor-pointer">
              <div class="flex items-center">
                <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                  stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25-2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25-2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
                </svg>
                <span>Herramientas</span>
              </div>
              <svg class="chevron-icon h-5 w-5 transform transition-transform duration-300 group-open:rotate-90"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </summary>
            <div class="pl-8 pt-1 pb-2 space-y-1">
              <a href="https://lookerstudio.google.com/reporting/ed48755a-2696-4f26-bd3b-fcbebc22ec59" target="_blank"
                rel="noopener noreferrer"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Actas</a>

              <a href="https://drive.google.com/drive/folders/1unmBiVA6RVgg7prlWwYc4i4Y_XnfYChQ?usp=sharing"
                target="_blank" rel="noopener noreferrer"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Carpeta
                digital</a>

              <a href="#" data-panel="panel-cronograma"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Cronograma
                de tecnicos</a>
              <a href="#" data-panel="panel-criticidad-civil"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Criticidad
                Civil</a>
              <a href="#" data-panel="panel-criticidad-electrico"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Criticidad
                Eléctrico</a>
              <a href="#" data-panel="panel-criticidad-frio"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Criticidad
                Frío</a>
              <a href="#" data-panel="panel-criticidad-ssgg"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Criticidad
                SSGG</a>
              <a href="#" data-panel="panel-guia"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Guía
                de derivación</a>

              <a href="https://lookerstudio.google.com/reporting/9f9687f6-2390-4d8a-bd89-669c3d7deb4f" target="_blank"
                rel="noopener noreferrer"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Tiendas
                cerradas</a>

              <a href="https://lookerstudio.google.com/reporting/89136f12-7eb0-45d2-a752-40108bcb3150" target="_blank"
                rel="noopener noreferrer"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Reporte
                Contact</a>
            </div>
          </details>
          <details class="group">
            <summary
              class="flex items-center justify-between px-4 py-3 font-semibold text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 cursor-pointer">
              <div class="flex items-center">
                <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                  stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
                </svg>
                <span>Otros</span>
              </div>
              <svg class="chevron-icon h-5 w-5 transform transition-transform duration-300 group-open:rotate-90"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </summary>
            <div class="pl-8 pt-1 pb-2 space-y-1">
              <a href="#" data-panel="panel-horario-contact"
                class="menu-link flex items-center px-4 py-2 text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Horario
                Contact</a>
            </div>
          </details>
        </nav>
        <div class="mt-auto p-4 border-t border-gray-200 dark:border-gray-700">
          <h3 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase">Estadísticas</h3>
          <div class="mt-2 text-center bg-gray-100 dark:bg-gray-700/50 p-3 rounded-lg">
            <p class="text-sm text-gray-600 dark:text-gray-300">Búsquedas realizadas:</p>
            <p id="search-counter-display" class="text-2xl font-bold text-red-600 dark:text-red-500">0</p>
          </div>
        </div>
      </div>
    </aside>

    <div class="flex-1 p-4 sm:p-6 md:p-10 overflow-y-auto">
      <main>
        <div id="panel-consulta" class="content-panel">
          <header class="text-center mb-12 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Informacion Nacional</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Ingresa el número de tienda o palabra clave y
              presiona Enter.</p>
          </header>
          <div
            class="max-w-4xl mx-auto mb-8 p-4 bg-yellow-100 dark:bg-yellow-900/30 border-l-4 border-yellow-500 rounded-r-lg">
            <div class="flex">
              <div class="flex-shrink-0">
                <svg class="h-6 w-6 text-yellow-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                  stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                </svg>
              </div>
              <div class="ml-3">
                <p class="text-sm font-bold text-yellow-800 dark:text-yellow-200">¡NO PRESTAR SERVICIOS TIENDAS DE
                  VISITA INTERNACIONAL!*: 11 - 14 - 33 - 35 - 109 - 111 - 124 - 164 - 198 - 261 - 277 - 375 - 413 - 417
                  - 428 - 439 - 464 - 473 - 481 - 482 - 484 - 486 - 536 - 542 - 544 - 586 - 692 - 703 - 708 - 711 - 716
                  - 729 - 750 - 755 - 756 - 763 - 766 - 784 - 900 - 921 - 939 - 961 - 1003 - 1100 - 1805 - 5140 - 5312 -
                  5399 - 5578</p>
              </div>
            </div>
          </div>
          <div class="mb-8 max-w-2xl mx-auto">
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <svg class="h-5 w-5 text-gray-400 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd"
                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                    clip-rule="evenodd" />
                </svg>
              </div>
              <input type="text" id="search-input" placeholder="Buscar por Tienda, Dirección, Proveedor..."
                class="w-full pl-11 pr-10 py-3 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500 focus:shadow-lg transition-shadow"
                disabled>
              <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                <button id="clear-button" class="hidden p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600"><svg
                    class="h-5 w-5 text-gray-500 dark:text-gray-400" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg></button>
              </div>
            </div>
          </div>
          <div id="results-container" class="space-y-4">
            <p id="initial-message" class="text-center text-gray-500 dark:text-gray-400">Cargando datos desde Google
              Sheets...</p>
            <p id="no-results-message" class="text-center text-gray-500 dark:text-gray-400 hidden">No se encontraron
              resultados.</p>
          </div>
        </div>

        <div id="panel-prov-zona" class="content-panel hidden">
          <header class="text-center mb-12 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Proveedores por Zona</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Usa los filtros para encontrar tiendas por
              provincia y localidad.</p>
          </header>
          <div class="mb-8 max-w-4xl mx-auto bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="provincia-filter"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Provincia</label>
                <select id="provincia-filter"
                  class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                  <option value="">Todas</option>
                </select>
              </div>
              <div>
                <label for="localidad-filter"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Localidad</label>
                <select id="localidad-filter"
                  class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                  <option value="">Todas</option>
                </select>
              </div>
              <div class="flex items-end">
                <button id="filter-button"
                  class="w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                  <svg class="h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h9.5a.75.75 0 010 1.5h-9.5A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5A.75.75 0 012 15.25z"
                      clip-rule="evenodd" />
                  </svg>
                  Filtrar
                </button>
              </div>
            </div>
          </div>
          <div id="results-container-zona" class="space-y-4">
            <p id="initial-message-zona" class="text-center text-gray-500 dark:text-gray-400">Selecciona los filtros y
              presiona "Filtrar" para ver los resultados.</p>
            <p id="no-results-message-zona" class="text-center text-gray-500 dark:text-gray-400 hidden">No se
              encontraron resultados para los filtros seleccionados.</p>
          </div>
        </div>

        <div id="panel-criticidad-civil" class="content-panel hidden">
          <header class="text-center mb-8 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Criticidad Civil</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Matriz para la derivación de tareas y
              visualización del equipo.</p>
          </header>

          <div>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                <h3 class="font-bold text-lg text-gray-800 dark:text-gray-200">TECNICO</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Toda tarea que pueda esperar la visita de un
                  tecnico interno.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> informar a Patricio Varela / Gabriel
                  Velazco.</p>
              </div>
              <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-700">
                <h3 class="font-bold text-lg text-red-800 dark:text-red-300">EMERGENCIA</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Cualquier evento GRAVE que pueda generar daño a
                  terceros o provoque el cierre de la tienda.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar al proveedor de mantenimiento
                  civil de la zona.</p>
              </div>
              <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700">
                <h3 class="font-bold text-lg text-blue-800 dark:text-blue-300">COORDINADOR DE OBRA</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Tareas que no se consideren emergencias pero
                  requieran de una evaluación técnica.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar el ticket al coordinador de
                  Obras asignado por zona.</p>
              </div>
            </div>
          </div>

          <section class="mt-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Matriz de Criticidad – Civil</h2>
            <div class="overflow-x-auto relative shadow-sm rounded-lg">
              <table class="w-full text-sm text-left text-gray-500">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                  <tr>
                    <th scope="col" class="py-3 px-6">Rubro</th>
                    <th scope="col" class="py-3 px-6">Subrubro</th>
                    <th scope="col" class="py-3 px-6">Detalle</th>
                    <th scope="col" class="py-3 px-6">Puntaje</th>
                    <th scope="col" class="py-3 px-6">Criticidad</th>
                    <th scope="col" class="py-3 px-6">Derivación</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Filtraciones</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Por lluvias</td>
                    <td class="py-4 px-6">Sobre equipos eléctricos</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-medium text-red-600">Critico</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Por lluvias</td>
                    <td class="py-4 px-6">Otras zonas</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Por terceros</td>
                    <td class="py-4 px-6">Sobre equipos eléctricos</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Por terceros</td>
                    <td class="py-4 px-6">Otros</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Pisos</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Salon</td>
                    <td class="py-4 px-6">Rotura o pozo</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Salon</td>
                    <td class="py-4 px-6">Desgaste</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Deposito Reserva</td>
                    <td class="py-4 px-6">Desgaste</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Deposito Reserva</td>
                    <td class="py-4 px-6">Rotura o pozo</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Vereda</td>
                    <td class="py-4 px-6">Rotura o pozo</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Vereda</td>
                    <td class="py-4 px-6">Desgaste</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Estacionamiento</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Pavimento</td>
                    <td class="py-4 px-6">Pozos</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Pavimento</td>
                    <td class="py-4 px-6">Desgaste</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Rampa descarga</td>
                    <td class="py-4 px-6">Averia</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Topes vehiculares</td>
                    <td class="py-4 px-6">Averia</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">PROVEEDOR BAJO ACTA</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Marcacion vial</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Alambrado perimetral</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Albañileria</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cielorrasos/Techos</td>
                    <td class="py-4 px-6">Caidos</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cielorrasos/Techos</td>
                    <td class="py-4 px-6">Rajaduras/fisuras</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cielorrasos/Techos</td>
                    <td class="py-4 px-6">Humedad</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO-PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cielorrasos/Techos</td>
                    <td class="py-4 px-6">Pintura</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Paredes</td>
                    <td class="py-4 px-6">Rajaduras/fisuras</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">COORDINADOR DE OBRA</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Paredes</td>
                    <td class="py-4 px-6">Humedad</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO-PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Pintura</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Huecos</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Pase de muro para GE</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Columnas</td>
                    <td class="py-4 px-6">Pintura</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Columnas</td>
                    <td class="py-4 px-6">Adecuacion por golpe</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Instalacion Sanitaria</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Tienda sin agua</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-medium text-red-600">Critico</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Griferias</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Perdidas</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Termotanques</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Bomba de presion</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Tanque de agua</td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Merenderos</td>
                    <td class="py-4 px-6">Artefactos sanitarios</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Merenderos</td>
                    <td class="py-4 px-6">Griferias</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Merenderos</td>
                    <td class="py-4 px-6">Perdidas</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Griferias</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Perdidas</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Desagues</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cloacales</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Pluviales</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Murales</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Atmosferico</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Vidrios</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6" colspan="2">Vidrio astillado/rajado</td>
                    <td class="py-4 px-6">6</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6" colspan="2">Vidrio faltante</td>
                    <td class="py-4 px-6">8</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Herrería/Carpinteria</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Portones</td>
                    <td class="py-4 px-6">Corredizo</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Portones</td>
                    <td class="py-4 px-6">De abrir</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Puertas</td>
                    <td class="py-4 px-6">Principal Manual</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Puertas</td>
                    <td class="py-4 px-6">Deposito</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Puertas</td>
                    <td class="py-4 px-6">Inferiores</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Ventanas</td>
                    <td class="py-4 px-6">Fachada</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Ventanas</td>
                    <td class="py-4 px-6">Inferiores</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Soportes de equipos</td>
                    <td class="py-4 px-6">Mensulas</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Soportes de equipos</td>
                    <td class="py-4 px-6">Plataformas</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Barandas</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cerramiento acustico</td>
                    <td class="py-4 px-6">ACTAS</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">-</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
        </div>

        <div id="panel-criticidad-electrico" class="content-panel hidden">
          <header class="text-center mb-8 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Criticidad Eléctrico</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Matriz para la derivación de tareas y
              visualización del equipo.</p>
          </header>

          <div>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                <h3 class="font-bold text-lg text-gray-800 dark:text-gray-200">TECNICO</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Ej: Cambio de un toma corriente que no afecta
                  la operación.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Informar al líder técnico del área.
                </p>
              </div>
              <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-700">
                <h3 class="font-bold text-lg text-red-800 dark:text-red-300">EMERGENCIA</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Corte de energía, riesgo eléctrico, falla de
                  grupo electrógeno.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar al proveedor eléctrico de la
                  zona.</p>
              </div>
              <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700">
                <h3 class="font-bold text-lg text-blue-800 dark:text-blue-300">COORDINADOR</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Fallas que requieren análisis pero no son
                  críticas para la operación.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar ticket al coordinador
                  Eléctrico.</p>
              </div>
            </div>
          </div>

          <section class="mt-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Matriz de Criticidad – Eléctrico</h2>
            <div class="overflow-x-auto relative shadow-sm rounded-lg">
              <table class="w-full text-sm text-left text-gray-500">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                  <tr>
                    <th scope="col" class="py-3 px-6">Rubro</th>
                    <th scope="col" class="py-3 px-6">Subrubro</th>
                    <th scope="col" class="py-3 px-6">Detalle</th>
                    <th scope="col" class="py-3 px-6">Puntaje</th>
                    <th scope="col" class="py-3 px-6">Criticidad</th>
                    <th scope="col" class="py-3 px-6">Derivación</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Inspecciones</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Por cortes internos</td>
                    <td class="py-4 px-6">Sobre equipos eléctricos</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-medium text-red-600">Critico</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Tomacorrientes</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Tendido electrico</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cambio de tomacorrientes</td>
                    <td class="py-4 px-6">-</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Luminarias</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Exterior</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Freezer</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Interior</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Murales</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Disyuntores/Térmicas/PAT</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Disyuntores</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Urgente</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">Térmicas</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Urgente</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Adecuacion</td>
                    <td class="py-4 px-6">PAT</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Urgente</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">TENDIDO ELECTRICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cableado</td>
                    <td class="py-4 px-6"> Cableado entre puntos eléctricos</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cableado</td>
                    <td class="py-4 px-6"> Cableado entre puntos eléctricos de red</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cableado</td>
                    <td class="py-4 px-6">Inst. de Suministro Electrico para AA</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Cableado</td>
                    <td class="py-4 px-6">Inst. de Suministro Electrico para cintas</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
        </div>

        <div id="panel-criticidad-frio" class="content-panel hidden">
          <header class="text-center mb-8 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Criticidad Frío</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Matriz para la derivación de tareas y
              visualización del equipo.</p>
          </header>

          <div>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                <h3 class="font-bold text-lg text-gray-800 dark:text-gray-200">TECNICO</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Ej: Burlete de heladera dañado pero equipo
                  enfría.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Informar al técnico de la zona.</p>
              </div>
              <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-700">
                <h3 class="font-bold text-lg text-red-800 dark:text-red-300">EMERGENCIA</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Pérdida de frío en heladeras/cámaras, riesgo de
                  pérdida de mercadería.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar al proveedor de frío de la
                  zona.</p>
              </div>
              <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700">
                <h3 class="font-bold text-lg text-blue-800 dark:text-blue-300">AUDITOR</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Casos que requieran una segunda opinión o
                  evaluación de rendimiento.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar ticket al Auditor de Frío.</p>
              </div>
            </div>
          </div>

          <section class="mt-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Matriz de Criticidad – Frío</h2>
            <div class="overflow-x-auto relative shadow-sm rounded-lg">
              <table class="w-full text-sm text-left text-gray-500">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                  <tr>
                    <th scope="col" class="py-3 px-6">Rubro</th>
                    <th scope="col" class="py-3 px-6">Subrubro</th>
                    <th scope="col" class="py-3 px-6">Detalle</th>
                    <th scope="col" class="py-3 px-6">Puntaje</th>
                    <th scope="col" class="py-3 px-6">Criticidad</th>
                    <th scope="col" class="py-3 px-6">Derivación</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Central de frio</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Central de frio</td>
                    <td class="py-4 px-6">No funciona</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-medium text-red-600">Critico</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Central de frio</td>
                    <td class="py-4 px-6">Funciona, leve averia</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-medium text-red-600">Critico</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Central de frio</td>
                    <td class="py-4 px-6">Ruidos molestos</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-medium text-red-600">Critico</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Murales de frio</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Murales</td>
                    <td class="py-4 px-6">No funciona</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Murales</td>
                    <td class="py-4 px-6">funciona</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Camaras frio</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Camara</td>
                    <td class="py-4 px-6">No funciona</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Camara</td>
                    <td class="py-4 px-6">funciona</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Aire acondicionado</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Aire A.</td>
                    <td class="py-4 px-6">No funciona</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Aire A.</td>
                    <td class="py-4 px-6">funciona</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Faltante de tapas y manijas</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Faltante de tapas</td>
                    <td class="py-4 px-6">Rotura</td>
                    <td class="py-4 px-6">7</td>
                    <td class="py-4 px-6 font-medium text-orange-600">Alta</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Faltantes de manijas</td>
                    <td class="py-4 px-6">Averia</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-white border-b">
                    <td class="py-4 px-6 font-semibold" colspan="6">Perdidas de agua en equipos de Frio</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Mural</td>
                    <td class="py-4 px-6">Desobstruccion de desagues</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Freezer</td>
                    <td class="py-4 px-6">Perdidas de agua</td>
                    <td class="py-4 px-6">3</td>
                    <td class="py-4 px-6 font-medium text-green-600">Baja</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                  <tr class="bg-gray-50 border-b">
                    <td class="py-4 px-6"></td>
                    <td class="py-4 px-6">Camara</td>
                    <td class="py-4 px-6">Desobstruccion de desagues</td>
                    <td class="py-4 px-6">5</td>
                    <td class="py-4 px-6 font-medium text-yellow-600">Media</td>
                    <td class="py-4 px-6">TECNICO</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
        </div>

        <div id="panel-criticidad-ssgg" class="content-panel hidden">
          <header class="text-center mb-8 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Criticidad SSGG</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Matriz para la derivación de tareas y
              visualización del equipo.</p>
          </header>

          <div>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-700">
                <h3 class="font-bold text-lg text-red-800 dark:text-red-300">URGENTE</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Afecta la operación o seguridad. Ej:
                  Cerrajería, Portones, Control de Plagas Crítico.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Derivar al proveedor específico del
                  rubro.</p>
              </div>
              <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700">
                <h3 class="font-bold text-lg text-blue-800 dark:text-blue-300">NO URGENTE</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Servicios programados que no detienen la
                  operación. Ej: Limpieza, Decomisos, Recarga de matafuegos.</p>
                <p class="text-xs text-gray-500 mt-2"><strong>Acción CC:</strong> Gestionar con proveedor según
                  cronograma o necesidad.</p>
              </div>
            </div>
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6 text-center">Matriz de Criticidad – SSGG
            </h2>
            <div class="overflow-x-auto relative shadow-md sm:rounded-lg">
              <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300">
                  <tr>
                    <th scope="col" class="py-3 px-6">Rubro</th>
                    <th scope="col" class="py-3 px-6">Subrubro</th>
                    <th scope="col" class="py-3 px-6">Detalle</th>
                    <th scope="col" class="py-3 px-6">Puntaje</th>
                    <th scope="col" class="py-3 px-6">Criticidad</th>
                    <th scope="col" class="py-3 px-6">Derivación</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                    <td class="py-4 px-6">SEGURIDAD</td>
                    <td class="py-4 px-6">CERRADURA</td>
                    <td class="py-4 px-6">FALLA CERRADURA DE ACCESO</td>
                    <td class="py-4 px-6">10</td>
                    <td class="py-4 px-6 font-bold text-red-600">EMERGENCIA</td>
                    <td class="py-4 px-6">PROVEEDOR</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>


        </div>

        <div id="panel-prov-contacto" class="content-panel hidden">
          <header class="text-center mb-12 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Contacto de Proveedores</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Utiliza los filtros para encontrar la
              información de contacto.</p>
          </header>
          <div class="mb-8 max-w-4xl mx-auto bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="rubro-filter-prov"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Rubro</label>
                <select id="rubro-filter-prov"
                  class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                  <option value="">Todos</option>
                </select>
              </div>
              <div>
                <label for="proveedor-filter-prov"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Proveedor</label>
                <select id="proveedor-filter-prov"
                  class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                  <option value="">Todos</option>
                </select>
              </div>
              <div class="flex items-end">
                <button id="filter-button-prov"
                  class="w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                  <svg class="h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h9.5a.75.75 0 010 1.5h-9.5A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5A.75.75 0 012 15.25z"
                      clip-rule="evenodd" />
                  </svg>
                  Filtrar
                </button>
              </div>
            </div>
          </div>
          <div id="provider-table-container" class="overflow-x-auto bg-white dark:bg-gray-800 rounded-xl shadow-md">
            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                  <th scope="col" class="px-6 py-3">Proveedor</th>
                  <th scope="col" class="px-6 py-3">Contacto</th>
                  <th scope="col" class="px-6 py-3">Email</th>
                  <th scope="col" class="px-6 py-3">Teléfono</th>
                  <th scope="col" class="px-6 py-3">Rubro</th>
                </tr>
              </thead>
              <tbody id="provider-table-body"></tbody>
            </table>
            <p id="provider-initial-message" class="text-center py-8 text-gray-500 dark:text-gray-400">Cargando datos de
              proveedores...</p>
            <p id="no-provider-results" class="text-center py-8 text-gray-500 dark:text-gray-400 hidden">No se
              encontraron proveedores para los filtros seleccionados.</p>
          </div>
        </div>

        <div id="panel-cronograma" class="content-panel hidden">
          <header class="text-center mb-8 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Cronograma de Técnicos</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Panel de control para la gestión y
              visualización de las cuadrillas.</p>
          </header>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border-l-4 border-blue-500">
              <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400">Tiendas Asignadas</h3>
              <p id="kpi-total" class="text-3xl font-bold text-gray-800 dark:text-gray-200">0</p>
            </div>
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border-l-4 border-green-500">
              <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400">Abiertas</h3>
              <p id="kpi-abiertas" class="text-3xl font-bold text-green-600 dark:text-green-500">0</p>
            </div>
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border-l-4 border-orange-500">
              <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400">Cerradas</h3>
              <p id="kpi-cerradas" class="text-3xl font-bold text-orange-600 dark:text-orange-500">0</p>
            </div>
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border-l-4 border-gray-600">
              <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400">Cierre Definitivo</h3>
              <p id="kpi-definitivo" class="text-3xl font-bold text-gray-700 dark:text-gray-300">0</p>
            </div>
          </div>

          <div class="mb-8 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-md">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="cuadrilla-filter-cronograma"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Filtrar por Cuadrilla</label>
                <select id="cuadrilla-filter-cronograma"
                  class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                  <option value="">Todas las cuadrillas</option>
                </select>
              </div>
              <div>
                <label for="tienda-search-cronograma"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Buscar por Tienda</label>
                <input type="text" id="tienda-search-cronograma" placeholder="Ingrese n° de tienda y presione Enter..."
                  class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
              </div>
            </div>
          </div>

          <div id="cronograma-results-container" class="w-full space-y-4">
          </div>


        </div>
        <div id="panel-horario-contact" class="content-panel hidden">
          <header class="text-center mb-12 pt-16 md:pt-0">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Horarios y Contactos de
              Agentes</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Información de turnos y contacto del equipo de
              soporte.</p>
          </header>
          <div class="max-w-7xl mx-auto space-y-8">
            <div>


              <div class="space-y-6">
                <div id="agent-card-gabriela-dominguez"
                  class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                  <div
                    class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/[.55] flex justify-between items-center">
                    <div>
                      <h3 class="text-xl font-bold text-gray-800 dark:text-white">Gabriela Dominguez</h3>
                      <p class="" text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4 border-b-2 border-red-500
                        pb-2">Turno Matutino ☀️</p>
                    </div>
                    <div id="badge-gabriela-dominguez" class="flex items-center"></div>
                    <span class="text-sm font-mono text-gray-500 dark:text-gray-400">Legajo: 31888</span>
                  </div>
                  <div class="p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 text-center">
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Lunes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Miercoles</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Jueves</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Viernes</p><span
                          class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Sábado</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Domingo</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                    </div>
                  </div>
                  <div
                    class="p-4 bg-gray-50 dark:bg-gray-800/[.55] border-t border-gray-200 dark:border-gray-700 flex items-center justify-start space-x-3">
                    <a href="https://api.whatsapp.com/send?phone=5491131443951" target="_blank"
                      class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform hover:scale-105"><svg
                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 16 16">
                        <path
                          d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.133.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z" />
                      </svg>WhatsApp</a>
                    <a href="mailto:gabriela.dominguez@diagroup.com"
                      class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform hover:scale-105"><svg
                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
<<<<<<< HEAD
                      </svg>Email</a>
=======
                      </svg>
                      <span class="font-medium">Email:</span>
                      <a href="mailto:gabriela.dominguez@diagroup.com"
                        class="underline hover:no-underline break-all">gabriela.dominguez@diagroup.com</a>
                    </div>
                  </div>
                </div>
                <div id="agent-card-matias-alvarez"
                  class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                  <div
                    class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/[.55] flex justify-between items-center">
                    <div>
                      <h3 class="text-xl font-bold text-gray-800 dark:text-white">Matias Alavarez</h3>
                      <p
                        class=" text-2xl font-bold text-gray-500 dark:text-gray-400 mb-4 border-b-2 border-grey-500 pb-2">
                        Turno Matutino ☀️</p>
                    </div>
                    <div id="badge-matias-alvarez" class="flex items-center"></div>
                    <span class="text-sm font-mono text-gray-500 dark:text-gray-400">Legajo: 25336</span>
                  </div>
                  <div class="p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 text-center">
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">9 a 17hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">9 a 17hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Miércoles</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">9 a 17hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Jueves</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">9 a 17hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Viernes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">9 a 17hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Sábado</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">9 a 17hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Domingo</p><span
                          class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                      </div>
                    </div>
                  </div>
                  <div
                    class="p-4 bg-gray-50 dark:bg-gray-800/[.55] border-t border-gray-200 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300 space-y-1">
                    <div class="flex items-center gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-width="2"
                          d="M3 5a2 2 0 012-2h2l2 4-2 2a16 16 0 007 7l2-2 4 2v2a2 2 0 01-2 2h-1C9.163 20 4 14.837 4 8V7a2 2 0 01-1-2z" />
                      </svg>
                      <span class="font-medium">Tel:</span>
                      <a href="tel:+5491153367592" class="underline hover:no-underline">+54 9 11 5336 7592</a>
                    </div>
                    <div class="flex items-center gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                      </svg>
                      <span class="font-medium">Email:</span>
                      <a href="mailto:matias.alvarez@diagroup.com"
                        class="underline hover:no-underline break-all">matias.alvarez@diagroup.com</a>
                    </div>
                  </div>
                </div>
                <div id="agent-card-jared-ramos"
                  class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                  <div
                    class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/[.55] flex justify-between items-center">
                    <div>
                      <h3 class="text-xl font-bold text-gray-800 dark:text-white">Jared Ramos</h3>
                      <p
                        class=" text-2xl font-bold text-gray-500 dark:text-gray-400 mb-4 border-b-2 border-grey-500 pb-2">
                        Turno Matutino ☀️</p>
                    </div>
                    <div id="badge-jared-ramos" class="flex items-center"></div>
                    <span class="text-sm font-mono text-gray-500 dark:text-gray-400">Legajo: 32558</span>
                  </div>
                  <div class="p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 text-center">
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Lunes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p><span
                          class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Miércoles</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Jueves</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Viernes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Sábado</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p><span
                          class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                      </div>
                    </div>
                  </div>
                  <div
                    class="p-4 bg-gray-50 dark:bg-gray-800/[.55] border-t border-gray-200 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300 space-y-1">
                    <!-- Teléfono -->
                    <div class="flex items-center gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-width="2"
                          d="M3 5a2 2 0 012-2h2l2 4-2 2a16 16 0 007 7l2-2 4 2v2a2 2 0 01-2 2h-1C9.163 20 4 14.837 4 8V7a2 2 0 01-1-2z" />
                      </svg>
                      <span class="font-medium">Tel:</span>
                      <a href="tel:+5491150293789" class="underline hover:no-underline font-mono tracking-wide">+54 9 11
                        5029 3789</a>
                    </div>

                    <!-- Email -->
                    <div class="flex items-center gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                      </svg>
                      <span class="font-medium">Email:</span>
                      <a href="mailto:jared.ramos@diagroup.com"
                        class="underline hover:no-underline break-all">jared.ramos@diagroup.com</a>
                    </div>
>>>>>>> parent of b94f085 (Update index.html)
                  </div>
                </div>
                <div id="agent-card-lucas-figueroa"
                  class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                  <div
                    class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/[.55] flex justify-between items-center">
                    <div>
                      <h3 class="text-xl font-bold text-gray-800 dark:text-white">Lucas Figueroa</h3>
                      <p class="" text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4 border-b-2 border-red-500
                        pb-2">Turno Matutino Rotativo ☀️🌙</p>
                    </div>
                    <div id="badge-lucas-figueroa" class="flex items-center"></div>
                    <span class="text-sm font-mono text-gray-500 dark:text-gray-400">Legajo: 31719</span>
                  </div>
                  <div class="p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 text-center">
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Lunes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p><span
                          class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Miércoles</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Jueves</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Viernes</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Sábado</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                      <div>
                        <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Domingo</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                      </div>
                    </div>
                  </div>
                  <div
                    class="p-4 bg-gray-50 dark:bg-gray-800/[.55] border-t border-gray-200 dark:border-gray-700 flex items-center justify-start space-x-3">
                    <a href="https://api.whatsapp.com/send?phone=5491139523889" target="_blank"
                      class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform hover:scale-105"><svg
                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 16 16">
                        <path
                          d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.133.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z" />
                      </svg>WhatsApp</a>
                    <a href="mailto:lucas.javier.figueroa@diagroup.com"
                      class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform hover:scale-105"><svg
                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                      </svg>Email</a>
                  </div>
                </div>
              </div>
            </div>
            <div id="agent-card-David-David"
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
              <div
                class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/[.55] flex justify-between items-center">
                <div>
                  <h3 class="text-xl font-bold text-gray-800 dark:text-white">David David</h3>
                  <p class="" text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4 border-b-2 border-red-500 pb-2">
                    Turno Matutino Rotativo ☀️🌙</p>
                </div>
                <div id="badge-lucas-figueroa" class="flex items-center"></div>
                <span class="text-sm font-mono text-gray-500 dark:text-gray-400">Legajo: 31719</span>
              </div>
              <div class="p-4">
                <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 text-center">
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Lunes</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p><span
                      class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Miércoles</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Jueves</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Viernes</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Sábado</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Domingo</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                </div>
              </div>
              <div
                class="p-4 bg-gray-50 dark:bg-gray-800/[.55] border-t border-gray-200 dark:border-gray-700 flex items-center justify-start space-x-3">
                <a href="https://api.whatsapp.com/send?phone=5491139523889" target="_blank"
                  class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform hover:scale-105"><svg
                    xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 16 16">
                    <path
                      d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.133.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z" />
                  </svg>WhatsApp</a>
                <a href="mailto:lucas.javier.figueroa@diagroup.com"
                  class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform hover:scale-105"><svg
                    xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                  </svg>Email</a>
              </div>
            </div>
            <div id="agent-card-christian-andersch"
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border-2 border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
              <div
                class="p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/[.55] flex justify-between items-center">
                <div>
                  <h3 class="text-xl font-bold text-gray-800 dark:text-white">Christian Andersch</h3>
                  <p class="" text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4 border-b-2 border-red-500 pb-2">
                    Turno Nocturno🌙</p>
                </div>
                <div id="badge-christian-andersch" class="flex items-center"></div>
                <span class="text-sm font-mono text-gray-500 dark:text-gray-400">Legajo: 31889</span>
              </div>
              <div class="p-4">
                <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 text-center">
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Lunes</p><span
                      class="inline-block bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full mt-1">Libre</span>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Martes</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">13 a 21hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Miércoles</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">13 a 21hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Jueves</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">16 a 00hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Viernes</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Sábado</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">7 a 15hs</p>
                  </div>
                  <div>
                    <p class="text-xs font-bold uppercase text-gray-500 dark:text-gray-400">Domingo</p>
                    <p class="font-semibold text-gray-700 dark:text-gray-300 mt-1">10 a 18hs</p>
                  </div>
                </div>
              </div>
              <div
                class="p-4 bg-gray-50 dark:bg-gray-800/[.55] border-t border-gray-200 dark:border-gray-700 flex items-center justify-start space-x-3">
                <a href="https://api.whatsapp.com/send?phone=5491139523889" target="_blank"
                  class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform hover:scale-105"><svg
                    xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 16 16">
                    <path
                      d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.133.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z" />
                  </svg>WhatsApp</a>
                <a href="mailto:christian.andersch.ext@diagroup.com"
                  class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform hover:scale-105"><svg
                    xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                  </svg>Email</a>

              </div>
            </div>
          </div>
        </div>
    </div>
  </div>

  <div id="panel-guia" class="content-panel hidden">

    <header class="text-center mb-8 pt-16 md:pt-0">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Guía Práctica para Agentes</h2>
      <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Herramientas y procedimientos para la gestión de
        mantenimiento.</p>
    </header>

    <nav id="guia-tabs" class="flex justify-center border-b border-gray-200 dark:border-gray-700 mb-8">
      <button data-tab="presentacion"
        class="tab-button text-gray-500 dark:text-gray-400 font-semibold py-4 px-6">Presentación</button>
      <button data-tab="asignacion"
        class="tab-button text-gray-500 dark:text-gray-400 font-semibold py-4 px-6">Asignación de Tareas</button>
      <button data-tab="gestion" class="tab-button text-gray-500 dark:text-gray-400 font-semibold py-4 px-6">Gestión por
        Categoría</button>
    </nav>

    <div id="presentacion" class="tab-content">
      <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-md text-center">
        <h3 class="text-2xl font-bold text-red-600 mb-4">Nuestro Objetivo</h3>
        <p class="text-gray-600 dark:text-gray-300 max-w-3xl mx-auto mb-8">Crear una guía ágil y práctica para los
          agentes del contact center, unificando la información clave para la gestión de mantenimiento de tiendas en un
          solo lugar.</p>
        <div class="border-t border-gray-200 dark:border-gray-700 pt-8">
          <h4 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-6">Puntos a Reforzar</h4>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 text-left">
            <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
              <h5 class="font-bold text-red-600 dark:text-red-500 mb-2">1. Comunicación</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">Feedback constante en el chat del contact center.</p>
            </div>
<<<<<<< HEAD
            <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
              <h5 class="font-bold text-red-600 dark:text-red-500 mb-2">2. Adherencia a Procesos</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">Respetar siempre el orden de criticidad y los procesos
                al derivar casos.</p>
            </div>
            <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
              <h5 class="font-bold text-red-600 dark:text-red-500 mb-2">3. Asignación</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">Consultar siempre al responsable correcto para cada
                tarea.</p>
            </div>
            <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
              <h5 class="font-bold text-red-600 dark:text-red-500 mb-2">4. Estandarización</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">Centralizar la información para garantizar una gestión
                unificada y consistente.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="asignacion" class="tab-content">
      <section class="mb-12 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border-l-4 border-red-600">
        <div class="flex items-start">
          <div class="flex-shrink-0"><span
              class="inline-flex justify-center items-center w-8 h-8 rounded-full bg-red-600 text-white font-bold text-xl">!</span>
          </div>
          <div class="ml-4">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Puntos Clave para Agentes</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-4">Es responsabilidad de cada agente velar por dar feedback
              constante y derivar los casos respetando siempre la jerarquía de criticidad para asegurar el seguimiento
              correcto.</p>
            <div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
              <h4 class="font-semibold text-md mb-2 text-gray-800 dark:text-gray-200">Orden de Criticidad:</h4>
              <ul class="space-y-2">
                <li class="flex items-center">
                  <div class="criticidad-dot bg-red-600"></div><span
                    class="font-medium text-red-600 dark:text-red-400">Crítica</span>
                </li>
                <li class="flex items-center">
                  <div class="criticidad-dot bg-red-400"></div><span class="font-medium text-red-400">Urgente</span>
                </li>
                <li class="flex items-center">
                  <div class="criticidad-dot bg-yellow-400"></div><span class="font-medium text-yellow-500">Alta</span>
                </li>
                <li class="flex items-center">
                  <div class="criticidad-dot bg-green-500"></div><span class="font-medium text-green-600">Media</span>
                </li>
                <li class="flex items-center">
                  <div class="criticidad-dot bg-green-300"></div><span class="font-medium text-green-400">Baja</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>
      <div class="mb-8 max-w-lg mx-auto">
        <label for="collaborator-select"
          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Seleccionar Colaborador:</label>
        <div class="relative">
          <select id="collaborator-select"
            class="w-full px-4 py-3 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition duration-300 shadow-sm bg-white dark:bg-gray-700 cursor-pointer">
            <option value="">-- Elige un responsable --</option>
          </select>
          <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-700">
            <div class="w-2 h-2 border-l-2 border-b-2 border-gray-500 transform rotate-[-45deg]"></div>
          </div>
        </div>
      </div>
      <div id="result-card-guia"
        class="result-card-guia max-w-lg mx-auto bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700">
        <div class="flex items-center mb-4">
          <div id="result-initial"
            class="w-12 h-12 flex items-center justify-center rounded-full bg-red-600 text-white font-bold text-xl mr-4 flex-shrink-0">
          </div>
          <h3 id="result-name" class="text-2xl font-bold text-gray-900 dark:text-white"></h3>
        </div>
        <div>
          <p class="text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2">Responsabilidades:</p>
          <ul id="result-tasks" class="space-y-2 text-gray-700 dark:text-gray-300"></ul>
        </div>
      </div>
    </div>

    <div id="gestion" class="tab-content">
      <div class="flex flex-col md:flex-row gap-8">
        <div class="w-full md:w-1/3 lg:w-1/4">
          <div class="relative mb-4">
            <input type="text" id="category-search" placeholder="Buscar categoría..."
              class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                fill="currentColor">
                <path fill-rule="evenodd"
                  d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                  clip-rule="evenodd" />
              </svg>
            </div>
          </div>
          <div id="category-list"
            class="bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm max-h-[60vh] overflow-y-auto"></div>
        </div>
        <div id="category-detail" class="w-full md:w-2/3 lg:w-3/4"></div>
      </div>
    </div>
  </div>
  <div id="panel-organigrama-vf" class="content-panel hidden">
    <header class="text-center mb-8 pt-16 md:pt-0">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Organigrama</h1>
      <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">2025</p>
    </header>
    <div class="organigrama-vf container mx-auto p-0 sm:p-2 md:p-4">

      <div class="overflow-x-auto">
        <nav class="tabs-nav">
          <button class="tab-button active" data-target="#ssgg-section">Servicios Generales</button>
          <button class="tab-button" data-target="#civil-section">Civil</button>
          <button class="tab-button" data-target="#frio-section">Frío</button>
          <button class="tab-button" data-target="#electrico-section">Eléctrico</button>
          <button class="tab-button" data-target="#sede-section">Mantenimiento de Sede</button>
          <button class="tab-button" data-target="#admin-section">Admin</button>
        </nav>
      </div>

      <div id="ssgg-section" class="tab-content">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Organigrama de Servicios Generales</h2>
        <div id="ssgg-chart-container" class="org-chart-container"></div>
      </div>

      <div id="civil-section" class="tab-content hidden">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Organigrama de Civil</h2>
        <div id="civil-chart-container" class="org-chart-container"></div>

      </div>

      <div id="frio-section" class="tab-content hidden">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Organigrama de Frío</h2>
        <div id="frio-chart-container" class="org-chart-container"></div>

      </div>

      <div id="electrico-section" class="tab-content hidden">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Organigrama Eléctrico</h2>
        <div id="electrico-chart-container" class="org-chart-container"></div>

      </div>

      <div id="sede-section" class="tab-content hidden">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Organigrama de Mantenimiento de Sede</h2>
        <div id="sede-chart-container" class="org-chart-container"></div>
      </div>

      <div id="admin-section" class="tab-content hidden">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Organigrama de Admin</h2>
        <div id="admin-chart-container" class="org-chart-container"></div>
      </div>

      <div id="info-modal" class="modal-overlay">
        <div class="modal-content">
          <button id="modal-close-btn" class="modal-close-btn">
            <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
          <h2 id="modal-title" class="text-3xl font-bold text-gray-900 mb-1"></h2>
          <p id="modal-role" class="text-lg font-medium text-red-600 mb-6"></p>
          <div id="modal-body" class="space-y-4"></div>
        </div>
      </div>

      </main>
    </div>
  </div>

  <script src="js/main.js"></script>
=======
        `;
            container.appendChild(card);
          });
        }

      });
    </script>
    <script>
      (function () {
        function initOrganigramaVF() {
          const root = document.querySelector('#panel-organigrama-vf .organigrama-vf');
          if (!root) return;
          if (root.dataset.vfInit === '1') { return; }
          root.dataset.vfInit = '1';
          const $ = (sel) => root.querySelector(sel);
          const $$ = (sel) => root.querySelectorAll(sel);

          const tabButtons = $$('.tab-button');
          const sections = $$('.tab-content');
          tabButtons.forEach(btn => {
            btn.addEventListener('click', () => {
              sections.forEach(s => { s.classList.add('hidden'); s.style.display = 'none'; });
              tabButtons.forEach(b => b.classList.remove('active'));
              btn.classList.add('active');
              const targetSel = btn.getAttribute('data-target');
              const section = root.querySelector(targetSel);
              if (section) { section.classList.remove('hidden'); section.style.display = 'block'; }
            });
          });

          const modal = $('#info-modal');
          const modalClose = $('#modal-close-btn');
          const modalTitle = $('#modal-title');
          const modalRole = $('#modal-role');
          const modalBody = $('#modal-body');
          function openModal(title, role, bodyHtml) {
            if (!modal) return;
            modalTitle.textContent = title || '';
            modalRole.textContent = role || '';
            modalBody.innerHTML = bodyHtml || '';
            modal.classList.add('active');
          }
          if (modalClose) modalClose.addEventListener('click', () => modal.classList.remove('active'));
          if (modal) modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); });

          function createCardHTML(node, level) {
            const borderLevel = level > 3 ? 3 : level;
            return `
                <div class="card level-${borderLevel}" data-name="${node.name || ''}">
                    <div class="card-name">${node.name || ''}</div>
                    <div class="card-role">${node.role || ''}</div>
                </div>`;
          }
          function buildOrgList(node, level = 0) {
            const li = document.createElement('li');
            li.innerHTML = createCardHTML(node, level);
            const card = li.firstElementChild;
            card.addEventListener('click', () => {
              let body = '';
              if (node.funciones) body += `<p>${node.funciones}</p>`;
              if (node.managedTeamTitle) body += `<h4 class="font-semibold mt-3 mb-1">${node.managedTeamTitle}</h4>`;
              if (node.managedTeam && Array.isArray(node.managedTeam)) {
                body += '<ul class="list-disc pl-5">';
                node.managedTeam.forEach(m => { body += `<li><strong>${m.name}</strong> — ${m.role}. <span class='text-sm text-gray-600'>${m.funciones || ''}</span></li>`; });
                body += '</ul>';
              }
              openModal(node.name, node.role, body);
            });
            if (node.children && node.children.length) {
              const ul = document.createElement('ul');
              node.children.forEach(child => ul.appendChild(buildOrgList(child, level + 1)));
              li.appendChild(ul);
            }
            return li;
          }
          function renderOrgChart(containerSel, data) {
            const container = $(containerSel);
            if (!container) return;
            container.innerHTML = '';
            const wrapper = document.createElement('div');
            wrapper.className = 'org-chart';
            const ul = document.createElement('ul');
            const li = buildOrgList(data, 0);
            ul.appendChild(li);
            wrapper.appendChild(ul);
            container.appendChild(wrapper);
          }
          const ssggTeamData = { name: 'Roberta Di Pace', role: 'Gerente SSGG', funciones: 'Responsable final del área de Servicios Generales, alineando los objetivos del sector con la estrategia de la compañía y asegurando la correcta ejecución presupuestaria.', children: [{ name: 'Juan Basini', role: 'Líder SSGG (Mantenimiento)', funciones: 'Presupuesto, Compras de servicios generales, Todo lo que requiere habilitación: red de incendio', managedTeamTitle: 'Equipo a Cargo (1)', managedTeam: [{ name: 'Matias Alvarez', role: 'Administrativo SSGG', funciones: 'Fumigación y Actas' }] }, { name: 'Patricio Varela', role: 'Líder SSGG (Mantenimiento)', funciones: 'Liderar el equipo de técnicos, Asignar roles y responsabilidades, Supervisar los avances de los objetivos, Impulsar el desarrollo profesional del equipo, Planificación de los planes de la compañía, Comunicación continua con cliente externo e interno', children: [{ name: 'Gabriel Velazco', role: 'Coord. Técnicos internos', funciones: 'Coordinación de cuadrilla de técnicos, Administrar los recursos y herramientas, Supervisar y reportar avances', managedTeamTitle: 'Equipos Técnicos a Cargo (18)', managedTeam: [{ name: 'Equipo Interior', role: '5 técnicos, 5 Camionetas', funciones: 'Tareas de técnicos' }, { name: 'Equipo Jonathan Fernandez', role: 'Referente + 2, 3 Camionetas', funciones: 'Ejecutar el cronograma asignado a su equipo, Solicitud de pedido de insumos/herramientas, Control de flota' }, { name: 'Equipo Facundo Moriz', role: 'Referente + 2, 3 Camionetas', funciones: 'Ejecutar el cronograma asignado a su equipo, Solicitud de pedido de insumos/herramientas, Control de flota' }, { name: 'Equipo Cristian Muñoz', role: 'Referente + 3, 3 Camionetas', funciones: 'Ejecutar desvíos, Cerramientos por plagas, Solicitud de pedido de insumos/herramientas, Control de flota' }] }, { name: 'Jonathan Ferro', role: 'Analista de Procesos y Administración', funciones: 'Encargado de la integración y transformación de datos desde Invgate y FENIX, con desarrollo de dashboards en Power BI y Looker Studio para distintos sectores. Automatización de reportes mediante macros, soporte técnico y gestión de herramientas digitales (FENIX, Invgate). Capacitación a usuarios, mantenimiento de bases de datos y ejecución de APIs para optimización de procesos.', }, { name: 'David Diaz', role: 'Analista de Procesos y Administración', funciones: 'Chatbot SSGG, Chatbot de técnicos, Procesos del contact center, Cronograma de técnicos, Proyecto nueva Carpeta verde digital, Gestión Presupuestaria, Administración, Control de Gastos en compras de insumo, Procesos Actas', }, { name: 'Natalia Gonzalez', role: ' Contact Center & Auditoría', funciones: 'Coordinación del contact, Limpieza de tiendas, Planning semanal de reapertura, Validación y auditar de correctivos y abonos', managedTeamTitle: 'Equipo a Cargo (4)', managedTeam: [{ name: 'Daniel Strassera', role: 'Equipo Contact', funciones: 'Generadores eléctricos, Zorras, Puertas automáticas y cintas, Montacargas' }, { name: 'Lucas Figueroa', role: 'Equipo Contact', funciones: 'Generadores eléctricos, Recolección de residuos y decomisos, Balanzas, Básculas' }, { name: 'Gabriela Dominguez', role: 'Equipo Contact', funciones: 'Generadores eléctricos, Cerrajería, Cortinería, Cartelería' }, { name: 'Christian Andersch', role: 'Equipo Contact', funciones: 'Generadores eléctricos, Derivaciones a técnicos, Matafuegos, Reclamo por falta de remitos' }] }] }] };
          const civilTeamData = { name: 'Nicolas Grosso', role: 'Gerente Civil', funciones: 'Responsable del departamento de Obras y Proyectos Civiles, Planificación y seguimiento de la estrategia de la compañía en el sector asegurando la correcta ejecución presupuestaria.', children: [{ name: 'Victoria Canepa', role: 'Líder de Equipamiento', funciones: 'Liderar el equipo de equipamiento,Supervisar desmonte de tiendas,Velar por los almacenes de equipamiento,Supervisar la logística del área de mantenimiento en su totalidad,Comunicación continua con cliente externo e interno,Desarrollos de nuevos equipamientos', children: [{ name: 'Leonardo Velazquez', role: 'Coordinador de equipamiento', funciones: 'Coordinación y control de logística del equipamiento y los insumos de mantenimiento de la cia, Control de funcionamiento de almacenes, Ejecución de prototipos de equipamiento' }, { name: 'Carlos Romeo', role: 'Coordinador de equipamiento', funciones: 'Coordinación de desmontes de tiendas, Coordinación del área de equipamiento de los proyectos de la cia, Coordinación de remates de equipamiento en desuso/scrap, Ejecución de prototipos de equipamiento' }, { name: 'Kevin Paya', role: 'Analista de equipamiento', funciones: 'Control de stock en almacenes, Reclasificaciones de activos fijos, Documentación de remates de equipamiento en desuso/scrap, Desarrollo de tableros y control administrativo del área de mantenimiento, Seguimiento de planes de equipamiento, Calibración y certificación de balanza' }] }, { name: 'Martin Ingeniere', role: 'Coordinador de Obras', funciones: 'Coordinación de proyecto y dirección de obras como el plan cubiertas puestas a punto remodelaciones aperturas, Elaboración de cómputos y presupuesto, Relevamiento y diagnóstico de patologías estructurales/constructivas, Auditoría técnica de trabajos de proveedores, Proceso administrativo de los trabajos de mantenimiento, Comunicación técnica con cliente externo e interno' }, { name: 'Paula Cirillo', role: 'Coordinador de Obras', funciones: 'Coordinación de proyecto y dirección de obras como el plan cubiertas puestas a punto remodelaciones aperturas, Elaboración de cómputos y presupuesto, Relevamiento y diagnóstico de patologías estructurales/constructivas, Auditoría técnica de trabajos de proveedores, Proceso administrativo de los trabajos de mantenimiento, Comunicación técnica con cliente externo e interno' }, { name: 'Florencia Vargas', role: 'Coordinador de Obras', funciones: 'Coordinación de proyecto y dirección de obras como el plan cubiertas puestas a punto remodelaciones aperturas, Elaboración de cómputos y presupuesto, Relevamiento y diagnóstico de patologías estructurales/constructivas, Auditoría técnica de trabajos de proveedores, Proceso administrativo de los trabajos de mantenimiento, Comunicación técnica con cliente externo e interno' }, { name: 'Matias Fadon', role: 'Coordinador de Obras', funciones: 'Coordinación de proyecto y dirección de obras como el plan cubiertas puestas a punto remodelaciones aperturas, Elaboración de cómputos y presupuesto, Relevamiento y diagnóstico de patologías estructurales/constructivas, Auditoría técnica de trabajos de proveedores, Proceso administrativo de los trabajos de mantenimiento, Comunicación técnica con cliente externo e interno' }] };
          const frioTeamData = { name: 'Santiago Codesido', role: 'Gerente de Frío Alimentario', funciones: 'Diseñar y administrar el presupuesto del área, Controlar los presupuestos y proyectos de inversión correspondientes a la Red de Tiendas,Planificar los trabajos de mantenimiento y construcción de instalaciones y equipamiento de tiendas, nuevos proyectos como de cambios y mejoras, Implementar mejoras continuas e innovadoras con base en los resultados obtenidos en análisis comparativos, Coordinar y brindar soporte en las compras gestionadas con la herramienta ARIBA, Seleccionar proveedores de acuerdo con las necesidades de los proyectos,Coordinar con las distintas áreas de la Dirección de Operaciones los proyectos de la Compañía,Definir las políticas del rubro a nivel Compañía,Establecer planes de mejora en rubros específicos dentro del plan estratégico de mantenimiento de tiendas', children: [{ name: 'Gustavo Anselmino', role: 'Líder de Frío y Auditores', funciones: 'Liderar planificar coordinar y supervisar operaciones de mantenimiento preventivo correctivo y predictivo de sistemas de refrigeración y climatización como cámaras centrales de frío aire acondicionado etc, Supervisar contratistas, asignar recursos y garantizar calidad seguridad y cumplimiento de plazos,Detectar causas raíz implementar soluciones técnicas y minimizar tiempos de inactividad en equipos clave, Gestionar inventarios de repuestos implementar prácticas de ahorro energético y maximizar el rendimiento de los sistemas,Asegurar normas de seguridad, medio ambiente y refrigerantes elaborar KPIs y reportes técnicos/financieros para la gerencia, además de capacitar al equipo en nuevas tecnologías.', children: [{ name: 'Ezequiel Custillo', role: 'Coordinador', funciones: 'Control y estados de cuenta y liberación de pagos a proveedores,  Llevar el control de ejecución de las tareas de mantenimiento, Control y envió de insumos para ejecución de trabajos, Controlar el inventario de equipamiento y su estado, Controlar las tareas de proveedores externo, Visitas y relevamientos a tienda, Control y envíos de recambio de equipamientos, seguimientos y ejecución de actas municipales, Control de stock y seguimiento de insumos, Coordinación y ejecución de nuevas gestiones de franquiciados.' }, { name: 'Agustin Marino', role: 'Coordinador', funciones: 'Control y estados de cuenta y liberación de pagos a proveedores,  Llevar el control de ejecución de las tareas de mantenimiento, Control y envió de insumos para ejecución de trabajos, Controlar el inventario de equipamiento y su estado, Controlar las tareas de proveedores externo, Visitas y relevamientos a tienda, Control y envíos de recambio de equipamientos, seguimientos y ejecución de actas municipales, Control de stock y seguimiento de insumos, Coordinación y ejecución de nuevas gestiones de franquiciados.' }, { name: 'Diego Ambruso', role: 'Auditor/a', funciones: 'Control y estados de cuenta y liberación de pagos a proveedores,  Llevar el control de ejecución de las tareas de mantenimiento, Control y envió de insumos para ejecución de trabajos, Controlar el inventario de equipamiento y su estado, Controlar las tareas de proveedores externo, Visitas y relevamientos a tienda, Control y envíos de recambio de equipamientos, seguimientos y ejecución de actas municipales, Control de stock y seguimiento de insumos, Coordinación y ejecución de nuevas gestiones de franquiciados.' }, { name: 'Leopoldo Lopez', role: 'Auditor/a', funciones: 'Control y estados de cuenta y liberación de pagos a proveedores,  Llevar el control de ejecución de las tareas de mantenimiento, Control y envió de insumos para ejecución de trabajos, Controlar el inventario de equipamiento y su estado, Controlar las tareas de proveedores externo, Visitas y relevamientos a tienda, Control y envíos de recambio de equipamientos, seguimientos y ejecución de actas municipales, Control de stock y seguimiento de insumos, Coordinación y ejecución de nuevas gestiones de franquiciados.' }] }] };
          const electricoTeamData = { name: 'Roberta Di pace', role: 'Gerente de Electricidad', funciones: 'Responsable final del área de Servicios Generales, alineando los objetivos del sector con la estrategia de la compañía y asegurando la correcta ejecución presupuestaria.', children: [{ name: 'Juan Basini', role: 'Líder Eléctrico y de Auditores', funciones: 'Proponer y liderar los planes de inversión y mantenimiento eléctrico con el fin de garantizar las necesidades energéticas que requieran las actividades de la Compañía', children: [{ name: 'Matias Alvarez', role: 'Analista y auditor Administrativo Eléctrico', funciones: 'Asegurar el correcto control seguimiento y análisis de indicadores del área aportando así la mejora en la toma de decisiones de los referentes del área, Realizar los indicadores de productividad Realizar el seguimiento de mantenimiento correctivo y casos pendientes, Análisis de consumos de servicios reportes de workiva, Auditoria de servicios a tiendas', }] }] };
          const sedeTeamData = { name: 'Agustina Menendez', role: 'Coordinadora de Servicios de Oficina', funciones: 'Gestión del mantenimiento de la Sede Nacional y oficinas Centros Regionales,Coordinación y supervisión de trabajos,Elaboración de documentación técnica para proveedores,Solicitud y control de presupuestos,Seguimiento de tareas y control de plazos.', };
          const adminTeamData = { name: 'Pablo Rey', role: 'Responsable y coordinador de Administración', funciones: 'Armado control y seguimiento del budget anual (CAPEX y OPEX) incluyendo forecast mensual run rate y análisis de desvíos real vs presupuestado,Desarrollo de tableros financieros e informes ejecutivos para la toma de decisiones estratégicas, Detección temprana de desvíos presupuestarios y coordinación con áreas clave para su análisis y mitigación,Presentación de resultados mensuales armado de reportes e informes de performance para dirección y C-Level,Definición y seguimiento de KPIs operativos y financieros impulsando la mejora continua en los procesos administrativos ejecución de auditorías internas a procesos y proveedores asegurando cumplimiento y eficiencia operativa,Supervisión del cierre contable mensual y control de provisiones,Automatización de procesos internos reporting armado de planillas presentaciones y control de datos.', children: [{ name: 'Lucas Fernandez', role: 'Administrativo', funciones: 'Realización y seguimiento de SOLPED (FRÍO),Realización y envío de EM (FRÍO),Control de validaciones de tickets (FRÍO),Gestión de anulaciones de OC OPEX y CAPEX (FRÍO).', }, { name: 'Mercedes Jaunarena', role: 'Analista Administrativo', funciones: 'Control y seguimiento de facturación de proveedores,Análisis de productividad circuito administrativo Soporte AS400 P test y otros departamentos,Estado de cuenta Proveedores,Control y reclasificaciones de compras para Stock (CAPEX).', }, { name: 'Nestor Montenegro', role: 'Analista Administrativo', funciones: 'Imputación y control de tickets de OPEX y CAPEX (SSGG), Confección de reportes diarios Invgate, Fénix y lib. de OC,Estimación y envío diario de Aterrizaje OPEX, Control y elaboración de provisiones mensuales.', }, { name: 'Francisco Palumbo', role: 'Administrativo', funciones: 'Realización y seguimiento de SOLPED (SSGG, SEDE, CR y TE),Realización y envío de EM (SSGG, SEDE CR y TE),Control de validaciones de tickets (SSGG SEDE, CR y TE),Gestión de anulaciones de OC OPEX y CAPEX (SSGG, SEDE CR  TE).', }, { name: 'Carmen Sotomayor', role: 'Analista Administrativo', funciones: 'Imputación y control de tickets de OPEX y CAPEX (FRÍO CIVIL y ELECTRICIDAD),Confección y envío de reportes de tickets pendientes de aprb. de Fénix y segundos remitos,Estimación y envío diario de Aterrizaje OPEX,Control y elaboración de provisiones mensuales.', }, { name: 'Camilia Tripicchio', role: 'Analista Administrativo', funciones: 'Conciliación de cuentas contables de OPEX,Estado de cuenta Proveedores,Control y seguimiento del circuito administrativo,Control y reclasificaciones de compras para Stock (CAPEX).', }] };

          renderOrgChart('#ssgg-chart-container', ssggTeamData);
          renderOrgChart('#civil-chart-container', civilTeamData);
          renderOrgChart('#frio-chart-container', frioTeamData);
          renderOrgChart('#electrico-chart-container', electricoTeamData);
          renderOrgChart('#sede-chart-container', sedeTeamData);
          renderOrgChart('#admin-chart-container', adminTeamData);


          // ---- Sub-tabs: Organigrama vs Matriz de Criticidad ----
          function setupCriticidadToggle(sectionId, chartSel) {
            const section = root.querySelector(sectionId);
            if (!section) return;
            const chart = section.querySelector(chartSel);
            const table = section.querySelector('table');
            if (!chart || !table) return; // only create toggle if both exist

            // Create toolbar
            if (section.querySelector('.vf-crit-toolbar')) { return; }
            const toolbar = document.createElement('div');
            toolbar.className = 'vf-crit-toolbar flex gap-2 mb-4 items-center';
            const btnOrg = document.createElement('button');
            btnOrg.className = 'px-3 py-1 rounded-md border text-sm font-medium bg-white dark:bg-gray-800';
            btnOrg.textContent = 'Organigrama';
            const btnMat = document.createElement('button');
            btnMat.className = 'px-3 py-1 rounded-md border text-sm font-medium bg-white dark:bg-gray-800';
            btnMat.textContent = 'Matriz de Criticidad';
            toolbar.appendChild(btnOrg); toolbar.appendChild(btnMat);

            // Insert toolbar right after the section title (h2), or at top
            const h2 = section.querySelector('h2');
            if (h2 && h2.parentNode) {
              h2.parentNode.insertBefore(toolbar, h2.nextSibling);
            } else {
              section.insertBefore(toolbar, section.firstChild);
            }

            function activate(which) {
              if (which === 'org') {
                chart.style.display = 'block';
                table.style.display = 'none';
                btnOrg.classList.add('ring-1', 'ring-red-500');
                btnMat.classList.remove('ring-1', 'ring-red-500');
              } else {
                chart.style.display = 'none';
                table.style.display = 'table';
                btnMat.classList.add('ring-1', 'ring-red-500');
                btnOrg.classList.remove('ring-1', 'ring-red-500');
              }
            }
            btnOrg.addEventListener('click', () => activate('org'));
            btnMat.addEventListener('click', () => activate('mat'));

            // start showing Organigrama
            activate('org');
          }

          setupCriticidadToggle('#civil-section', '#civil-chart-container');
          setupCriticidadToggle('#frio-section', '#frio-chart-container');
          setupCriticidadToggle('#electrico-section', '#electrico-chart-container');

          const firstBtn = $$('.tab-button')[0];
          if (firstBtn) firstBtn.click();
        }
        window.__initOrganigramaVF = initOrganigramaVF;
        // Fallback init
        document.addEventListener('DOMContentLoaded', function () {
          if (typeof window.__initOrganigramaVF === 'function') { try { window.__initOrganigramaVF(); } catch (e) { console.warn(e); } }
        });
        document.addEventListener('click', function (e) {
          var link = e.target.closest && e.target.closest('[data-panel="panel-organigrama-vf"]');
          if (link && typeof window.__initOrganigramaVF === 'function') { try { window.__initOrganigramaVF(); } catch (e) { console.warn(e); } }
        });
      })();
    </script>


    <script>

      /* === DAVOO UX Upgrade (accesibilidad + interacción) ===
         - Tabs accesibles (teclado)
         - Zoom/Pan del organigrama con toolbar (+/-/Reset)
         - Modal: ESC para cerrar y trap de foco básico
         Todo sin romper tu JS: solo se engancha si existen los elementos.
      ========================================================= */

      (function () {
        document.addEventListener('DOMContentLoaded', () => {
          enhanceTabs();
          enhanceOrgZoom();
          enhanceModal();
        });

        function enhanceTabs() {
          const scopes = document.querySelectorAll('.organigrama-vf, .content-panel');
          scopes.forEach(scope => {
            const tabs = scope.querySelectorAll('.tab-button');
            const panels = scope.querySelectorAll('.tab-content');
            if (!tabs.length) return;

            // Roles ARIA
            const strip = scope.querySelector('.tab-strip') || scope;
            strip.setAttribute('role', 'tablist');
            tabs.forEach((btn, i) => {
              btn.setAttribute('role', 'tab');
              btn.setAttribute('tabindex', btn.classList.contains('active') ? '0' : '-1');
              const target = btn.getAttribute('data-target');
              const panel = target ? scope.querySelector(target) : null;
              if (panel) {
                panel.setAttribute('role', 'tabpanel');
                panel.setAttribute('aria-labelledby', `tab-${i}`);
                btn.id = `tab-${i}`;
              }
              btn.addEventListener('keydown', (e) => {
                const idx = Array.from(tabs).indexOf(btn);
                let next = null;
                if (e.key === 'ArrowRight') next = tabs[(idx + 1) % tabs.length];
                if (e.key === 'ArrowLeft') next = tabs[(idx - 1 + tabs.length) % tabs.length];
                if (next) {
                  e.preventDefault();
                  next.click();
                  next.focus();
                }
              });
              btn.addEventListener('click', () => {
                tabs.forEach(b => b.setAttribute('tabindex', b.classList.contains('active') ? '0' : '-1'));
              });
            });
          });
        }

        function enhanceOrgZoom() {
          const wrapScope = document.querySelector('#panel-organigrama-vf .organigrama-vf') || document;
          const charts = wrapScope.querySelectorAll('.org-chart');
          charts.forEach(chart => {
            if (chart.dataset.zoomEnh === '1') return;
            chart.dataset.zoomEnh = '1';
            let scale = 1, tx = 0, ty = 0;
            const apply = () => chart.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;

            // Toolbar
            let toolbar = chart.parentElement.querySelector('.org-zoom-toolbar');
            if (!toolbar) {
              toolbar = document.createElement('div');
              toolbar.className = 'org-zoom-toolbar';
              toolbar.innerHTML = `<button type="button" data-a="minus">-</button>
                             <button type="button" data-a="plus">+</button>
                             <button type="button" data-a="reset">Reset</button>`;
              chart.parentElement.insertBefore(toolbar, chart);
            }
            toolbar.addEventListener('click', (e) => {
              const a = e.target && e.target.getAttribute('data-a');
              if (!a) return;
              if (a === 'plus') scale = Math.min(2.2, +(scale + 0.1).toFixed(2));
              if (a === 'minus') scale = Math.max(0.4, +(scale - 0.1).toFixed(2));
              if (a === 'reset') { scale = 1; tx = 0; ty = 0; }
              apply();
            });

            // Wheel zoom (Ctrl+wheel) y pan con arrastre
            chart.addEventListener('wheel', (e) => {
              if (!e.ctrlKey) return;
              e.preventDefault();
              const delta = e.deltaY > 0 ? -0.1 : 0.1;
              scale = Math.max(0.4, Math.min(2.2, +(scale + delta).toFixed(2)));
              apply();
            }, { passive: false });

            let dragging = false, lx = 0, ly = 0;
            chart.addEventListener('mousedown', (e) => { dragging = true; lx = e.clientX; ly = e.clientY; chart.style.cursor = 'grabbing'; });
            window.addEventListener('mousemove', (e) => {
              if (!dragging) return;
              tx += e.clientX - lx; ty += e.clientY - ly; lx = e.clientX; ly = e.clientY; apply();
            });
            window.addEventListener('mouseup', () => { dragging = false; chart.style.cursor = 'default'; });
          });
        }

        function enhanceModal() {
          const modal = document.querySelector('#info-modal');
          if (!modal) return;
          const closeBtn = modal.querySelector('#modal-close-btn');
          const focusables = () => Array.from(modal.querySelectorAll('a, button, input, [tabindex]:not([tabindex="-1"])')).filter(el => !el.hasAttribute('disabled'));
          const firstFocus = () => (focusables()[0] || closeBtn || modal);

          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
              modal.classList.remove('active');
            } else if (e.key === 'Tab' && modal.classList.contains('active')) {
              const f = focusables();
              if (!f.length) return;
              const first = f[0], last = f[f.length - 1];
              if (e.shiftKey && document.activeElement === first) { last.focus(); e.preventDefault(); }
              else if (!e.shiftKey && document.activeElement === last) { first.focus(); e.preventDefault(); }
            }
          });

          // Focus al abrir
          const mo = new MutationObserver(() => { if (modal.classList.contains('active')) setTimeout(() => firstFocus().focus(), 10); });
          mo.observe(modal, { attributes: true, attributeFilter: ['class'] });
        }
      })();


      ; (function () {
        const reattach = () => { try { if (typeof enhanceOrgZoom === 'function') enhanceOrgZoom(); } catch (_) { } };
        document.addEventListener('click', (e) => {
          const link = e.target.closest && e.target.closest('[data-panel="panel-organigrama-vf"]');
          if (link) setTimeout(reattach, 60);
          if (e.target && e.target.classList && e.target.classList.contains('tab-button')) {
            setTimeout(reattach, 60);
          }
        });
        // MutationObserver por si el organigrama se inyecta asincrónicamente
        const panel = document.querySelector('#panel-organigrama-vf');
        if (panel && 'MutationObserver' in window) {
          const mo = new MutationObserver(() => reattach());
          mo.observe(panel, { childList: true, subtree: true });
        }
      })();
    </script>

    <script>

      /* === DAVOO Pro Pack – JS =====================================================
         - Chips de criticidad + barra de acciones (export CSV, copiar enlace, reset)
         - Deep link de filtros en URL
         - Command Palette (Ctrl/Cmd + K) con búsqueda de navegación
         - Toasts
         Respeta paleta y fuentes existentes.
      ==============================================================================*/
      (function () {
        const $ = (sel, ctx = document) => ctx.querySelector(sel);
        const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));

        document.addEventListener('DOMContentLoaded', () => {
          initCriticidadTables();
          initCommandPalette();
          setupA11yLive();
        });

        /* -------------------- Toasts -------------------- */
        function toast(msg, timeout = 2200) {
          let wrap = $('.dv-toast-wrap');
          if (!wrap) {
            wrap = document.createElement('div');
            wrap.className = 'dv-toast-wrap';
            document.body.appendChild(wrap);
          }
          const t = document.createElement('div');
          t.className = 'dv-toast';
          t.innerHTML = msg;
          wrap.appendChild(t);
          setTimeout(() => t.remove(), timeout);
        }

        /* -------------- Criticidad tables -------------- */
        function initCriticidadTables() {
          // Scope: criticidad panels
          const panels = ['panel-criticidad-frio', 'panel-criticidad-electrico', 'panel-criticidad-civil', 'panel-criticidad-ssgg']
            .map(id => document.getElementById(id))
            .filter(Boolean);
          panels.forEach(panel => enhancePanel(panel));
          // Restore from URL if present
          restoreFiltersFromURL();
        }

        function enhancePanel(panel) {
          // Find all data tables (skip ones that clearly aren't matrices)
          const tables = $$('table', panel).filter(tb => /RUBRO/i.test(tb.innerText) && /CRITICIDAD/i.test(tb.innerText));
          tables.forEach(tb => mountFiltersForTable(tb));
        };

        // Initial filter after mount (in case URL has params)
        applyFilters(table, toolbar, colCrit, colDer);
      }

  function makeChip(id, label, cls) {
        const b = document.createElement('button');
        b.className = `dv-chip ${cls}`;
        b.type = 'button';
        b.id = id;
        b.setAttribute('aria-pressed', 'false');
        b.innerHTML = `<span class="dot"></span>${label}`;
        return b;
      }

      function getActiveValues(toolbar) {
        const crit = $$('[id^="crit-"][aria-pressed="true"]', toolbar).map(x => x.textContent.trim().toUpperCase());
        const der = $$('[id^="der-"][aria-pressed="true"]', toolbar).map(x => x.textContent.trim().toUpperCase());
        return { crit, der };
      }

      function applyFilters(table, toolbar, colCrit, colDer) {
        const { crit, der } = getActiveValues(toolbar);
        let visible = 0;
        $$('tbody tr', table).forEach(tr => {
          if (tr.classList.contains('dv-empty-row')) return;
          const tds = $$('td', tr).map(td => td.textContent.trim().toUpperCase());
          const okCrit = (crit.length === 0) || (colCrit >= 0 && crit.some(v => (tds[colCrit] || '').includes(v)));
          const okDer = (der.length === 0) || (colDer >= 0 && der.some(v => (tds[colDer] || '').includes(v)));
          const show = okCrit && okDer;
          tr.style.display = show ? '' : 'none';
          if (show) visible++;
        });
        const emptyRow = $('tbody .dv-empty-row', table);
        if (emptyRow) emptyRow.style.display = visible === 0 ? '' : 'none';
        // live region update
        const live = $('#dv-live');
        if (live) live.textContent = `Filtrado aplicado. ${visible} filas visibles.`;
      }

      function clearChips(toolbar) {
        $$('[aria-pressed="true"]', toolbar).forEach(x => x.setAttribute('aria-pressed', 'false'));
      }

      function exportVisibleRowsToCSV(table) {
        const rows = [];
        const headers = $$('thead th', table).map(th => cleanCSV(th.textContent));
        rows.push(headers.join(','));
        $$('tbody tr', table).forEach(tr => {
          if (tr.style.display === 'none' || tr.classList.contains('dv-empty-row')) return;
          const cols = $$('td', tr).map(td => cleanCSV(td.textContent));
          if (cols.length) rows.push(cols.join(','));
        });
        const blob = new Blob([rows.join('\n')], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'criticidad.csv'; a.click();
        URL.revokeObjectURL(url);
        toast('CSV exportado');
      }
      const cleanCSV = (t) => `"${t.replace(/"/g, '""').trim()}"`;

      /* ---------------- Deep link de filtros ---------------- */
      function updateURLFromFilters() {
        const params = new URLSearchParams(location.search);
        // serializamos por panel id
        ['panel-criticidad-frio', 'panel-criticidad-electrico', 'panel-criticidad-civil', 'panel-criticidad-ssgg'].forEach(pid => {
          const panel = document.getElementById(pid);
          if (!panel) return;
          const active = $$('[aria-pressed="true"]', panel);
          if (active.length === 0) { params.delete(pid); return; }
          params.set(pid, active.map(a => a.id).join('|'));
        });
        const newUrl = `${location.pathname}?${params.toString()}${location.hash}`;
        history.replaceState(null, '', newUrl);
      }
      function restoreFiltersFromURL() {
        const params = new URLSearchParams(location.search);
        params.forEach((v, key) => {
          if (!/^panel-criticidad-/.test(key)) return;
          const panel = document.getElementById(key);
          if (!panel) return;
          v.split('|').forEach(id => {
            const chip = panel.querySelector('#' + CSS.escape(id));
            if (chip) chip.setAttribute('aria-pressed', 'true');
          });
        });
      }

      /* ---------------- Command Palette ---------------- */
      function initCommandPalette() {
        const overlay = document.createElement('div');
        overlay.className = 'dv-kbar';
        overlay.innerHTML = `<div class="panel" role="dialog" aria-modal="true" aria-label="Buscar y navegar">
      <header><input type="text" placeholder="Buscar (personas, menús, tabs)..." aria-label="Buscar"/></header>
      <ul role="listbox"></ul>
    </div>`;
        document.body.appendChild(overlay);
        const input = $('input', overlay);
        const list = $('ul', overlay);

        function buildItems() {
          const items = [];
          // Menú lateral
          $$('#main-menu a, nav a').forEach(a => {
            const text = a.textContent.trim(); if (!text) return;
            items.push({ text, action: () => a.click() });
          });
          // Tabs
          $$('.tab-button').forEach(b => {
            const text = b.textContent.trim(); if (!text) return;
            items.push({ text: `Tab: ${text}`, action: () => b.click() });
          });
          // Anclas con id
          $$('h2[id], h3[id]').forEach(h => {
            items.push({ text: h.textContent.trim(), action: () => { location.hash = '#' + h.id; } });
          });
          return items;
        }
        let data = buildItems();
        function open() { overlay.classList.add('active'); input.value = ''; render(''); setTimeout(() => input.focus(), 0); }
        function close() { overlay.classList.remove('active'); }
        function render(q) {
          list.innerHTML = '';
          const qn = q.toLowerCase();
          data.filter(i => i.text.toLowerCase().includes(qn)).slice(0, 30).forEach((it, idx) => {
            const li = document.createElement('li'); li.textContent = it.text; li.tabIndex = 0;
            if (idx === 0) li.classList.add('active');
            li.addEventListener('click', () => { it.action(); close(); });
            list.appendChild(li);
          });
        }
        input.addEventListener('input', e => render(e.target.value));
        document.addEventListener('keydown', e => {
          if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') { e.preventDefault(); data = buildItems(); open(); }
          if (e.key === 'Escape' && overlay.classList.contains('active')) close();
        });
      }

      /* ---------------- A11y live region ---------------- */
      function setupA11yLive() {
        let live = document.getElementById('dv-live');
        if (!live) {
          live = document.createElement('div');
          live.id = 'dv-live';
          live.setAttribute('aria-live', 'polite');
          live.className = 'sr-only';
          live.style.position = 'absolute'; live.style.left = '-9999px';
          document.body.appendChild(live);
        }
      }
      ;

    </script>

    <script>
      /* ===== Pro Pack v2 JS: Mini Gantt + Focus Path ============================== */
      (function () {
        const $ = (s, c = document) => c.querySelector(s);
        const $$ = (s, c = document) => Array.from(c.querySelectorAll(s));

        document.addEventListener('DOMContentLoaded', () => {
          try { mountMiniGantt(); } catch (e) { /* silent */ }
          try { mountFocusPath(); } catch (e) { /* silent */ }
        });



        /* ---------------- Focus Path (Organigramas) ---------------- */
        function mountFocusPath() {
          const panel = document.getElementById('panel-organigrama-vf');
          if (!panel) return;
          const wrap = document.createElement('div');
          wrap.className = 'dv-org-search';
          wrap.innerHTML = `<input type="search" placeholder="Buscar persona (Focus Path)..." aria-label="Buscar persona">
      <div class="dv-org-tools">
        <button type="button" class="dv-btn" id="dv-focus-clear">Limpiar</button>
      </div>`;
          panel.insertBefore(wrap, panel.firstElementChild?.nextSibling || panel.firstChild);

          const input = wrap.querySelector('input');
          const btnClear = wrap.querySelector('#dv-focus-clear');
          btnClear.addEventListener('click', () => clearFocus(panel));

          input.addEventListener('keydown', e => {
            if (e.key === 'Enter') {
              const q = input.value.trim().toLowerCase();
              focusQuery(panel, q);
            }
          });
        }

        function focusQuery(panel, q) {
          clearFocus(panel);
          if (!q) { return; }
          const nodes = findOrgNodes(panel);
          const matches = nodes.filter(n => n.textContent.trim().toLowerCase().includes(q));
          if (matches.length === 0) { return; }
          nodes.forEach(n => n.classList.add('org-dim'));
          matches.forEach(n => {
            n.classList.remove('org-dim'); n.classList.add('org-focus');
            let p = n.parentElement;
            const limit = panel;
            let safety = 0;
            while (p && p !== limit && safety++ < 50) {
              if (p.classList && /org|node|card/i.test(p.className)) {
                p.classList.remove('org-dim'); p.classList.add('org-focus');
              }
              p = p.parentElement;
            }
            if (matches[0] === n) { n.scrollIntoView({ block: 'center', behavior: 'smooth' }); }
          });
        }

        function clearFocus(panel) {
          const els = panel.querySelectorAll('.org-dim, .org-focus');
          els.forEach(el => { el.classList.remove('org-dim'); el.classList.remove('org-focus'); });
        }

        function findOrgNodes(panel) {
          let nodes = panel.querySelectorAll('[data-role="org-node"]');
          if (nodes.length) return Array.from(nodes);
          nodes = panel.querySelectorAll('.org-node, .orgcard, .org-card, .card, .node');
          if (nodes.length) return Array.from(nodes);
          const canvas = panel.querySelector('#org-canvas, #organigrama-canvas') || panel;
          nodes = Array.from(canvas.querySelectorAll('*')).filter(el => el.children.length === 0 && /\S/.test(el.textContent));
          return nodes;
        }
      })();
    </script>

    <script>

      /* === Pro Pack v3 JS: Organigrama – Colapsar Niveles + Minimap =============== */
      (function () {
        const $ = (s, c = document) => c.querySelector(s);
        const $$ = (s, c = document) => Array.from(c.querySelectorAll(s));

        document.addEventListener('DOMContentLoaded', () => {
          const panel = document.getElementById('panel-organigrama-vf');
          if (!panel) return;
          mountOps(panel);
          mountMinimap(panel);
        });

        function mountOps(panel) {
          // Reusar la barra de búsqueda si existe; si no, crear contenedor
          let anchor = panel.querySelector('.dv-org-search');
          if (!anchor) {
            anchor = document.createElement('div');
            anchor.className = 'dv-org-search';
            panel.insertBefore(anchor, panel.firstChild);
          }
          const ops = document.createElement('div');
          ops.className = 'dv-org-ops';
          ops.innerHTML = `<div class="dv-seg" role="group" aria-label="Colapsar niveles">
        <button type="button" data-lvl="1" aria-pressed="false" title="Mostrar hasta nivel 1">1</button>
        <button type="button" data-lvl="2" aria-pressed="true" title="Mostrar hasta nivel 2">2</button>
        <button type="button" data-lvl="3" aria-pressed="false" title="Mostrar hasta nivel 3">3</button>
      </div>`;
          anchor.parentNode.insertBefore(ops, anchor.nextSibling);

          ops.addEventListener('click', (e) => {
            const btn = e.target.closest('button[data-lvl]'); if (!btn) return;
            ops.querySelectorAll('button[data-lvl]').forEach(b => b.setAttribute('aria-pressed', b === btn ? 'true' : 'false'));
            const max = parseInt(btn.dataset.lvl, 10) || 2;
            collapseToLevel(panel, max);
          });

          // Estado inicial (nivel 2)
          collapseToLevel(panel, 2);
        }

        function collapseToLevel(panel, maxLevel) {
          const root = findOrgRoot(panel);
          if (!root) return;
          // Calcular profundidad por nodo: usar .org-node o tarjetas con data-role
          const nodes = Array.from(root.querySelectorAll('.org-node, [data-role="org-node"], .orgcard, .org-card'));
          nodes.forEach(n => {
            const depth = computeDepth(n, root);
            const wrap = n.closest('.org-node-wrapper, li, .node, .card') || n;
            if (depth > maxLevel) { wrap.classList.add('org-hidden'); }
            else { wrap.classList.remove('org-hidden'); }
          });
        }

        function computeDepth(el, limit) {
          let d = 1, p = el.parentElement;
          while (p && p !== limit) {
            if (p.classList && (p.classList.contains('org-children') || p.tagName.toLowerCase() === 'li')) d++;
            p = p.parentElement;
          }
          return d;
        }

        function findOrgRoot(panel) {
          return panel.querySelector('.org-chart, #organigrama-canvas, #org-canvas') || panel.querySelector('.organigrama-vf') || panel;
        }

        /* ------------------------ Minimap ------------------------ */
        function mountMinimap(panel) {
          const root = findOrgRoot(panel);
          if (!root) return;
          // hallar el scroller más cercano (el padre que hace scroll)
          let scroller = root;
          let p = root.parentElement;
          while (p && p !== panel) {
            const overflowX = getComputedStyle(p).overflowX;
            const overflowY = getComputedStyle(p).overflowY;
            if ((overflowX === 'auto' || overflowX === 'scroll') || (overflowY === 'auto' || overflowY === 'scroll')) { scroller = p; break; }
            p = p.parentElement;
          }

          const mm = document.createElement('aside');
          mm.className = 'dv-minimap';
          mm.innerHTML = `<div class="title">Minimapa</div><div class="wrap"><canvas></canvas><span class="hint">arrastrá</span></div>`;
          // Colocar al final del panel (sticky al fondo de la vista)
          panel.appendChild(mm);

          const canvas = mm.querySelector('canvas');
          const ctx = canvas.getContext('2d');

          function draw() {
            const cw = canvas.clientWidth, ch = canvas.clientHeight;
            canvas.width = cw; canvas.height = ch;
            // Tamaño total del contenido
            const contentW = root.scrollWidth;
            const contentH = root.scrollHeight;
            if (!contentW || !contentH) return;
            // Viewport actual
            const viewW = scroller.clientWidth;
            const viewH = scroller.clientHeight;
            const sx = scroller.scrollLeft;
            const sy = scroller.scrollTop;

            // Limpio
            ctx.clearRect(0, 0, cw, ch);
            // Fondo
            ctx.fillStyle = '#f9fafb';
            ctx.fillRect(0, 0, cw, ch);
            // Escala
            const scale = Math.min(cw / contentW, ch / contentH);
            const padX = (cw - contentW * scale) / 2;
            const padY = (ch - contentH * scale) / 2;

            // Contorno del contenido
            ctx.strokeStyle = 'rgba(0,0,0,.15)';
            ctx.strokeRect(padX, padY, contentW * scale, contentH * scale);

            // Viewport
            ctx.fillStyle = 'rgba(225,29,72,.12)';
            ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--dia-red') || '#e11d48';
            ctx.lineWidth = 2;
            ctx.fillRect(padX + sx * scale, padY + sy * scale, viewW * scale, viewH * scale);
            ctx.strokeRect(padX + sx * scale, padY + sy * scale, viewW * scale, viewH * scale);
          }

          // Sync en scroll/resize
          scroller.addEventListener('scroll', draw, { passive: true });
          window.addEventListener('resize', draw);
          const ro = new ResizeObserver(draw);
          ro.observe(root);
          ro.observe(scroller);

          // Navegación por arrastre en el minimapa
          let dragging = false;
          mm.addEventListener('mousedown', (e) => { dragging = true; moveToEvent(e); });
          window.addEventListener('mousemove', (e) => { if (dragging) moveToEvent(e); });
          window.addEventListener('mouseup', () => dragging = false);

          function moveToEvent(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const contentW = root.scrollWidth;
            const contentH = root.scrollHeight;
            const viewW = scroller.clientWidth;
            const viewH = scroller.clientHeight;

            const cw = canvas.clientWidth, ch = canvas.clientHeight;
            const scale = Math.min(cw / contentW, ch / contentH);
            const padX = (cw - contentW * scale) / 2;
            const padY = (ch - contentH * scale) / 2;

            // Centro del viewport en el punto clicado
            const targetX = Math.max(0, (x - padX) / scale - viewW / 2);
            const targetY = Math.max(0, (y - padY) / scale - viewH / 2);
            scroller.scrollLeft = Math.min(targetX, contentW - viewW);
            scroller.scrollTop = Math.min(targetY, contentH - viewH);
            draw();
          }

          // Primer pintado
          setTimeout(draw, 60);
        }
      })();

    </script>
    

    <script id="remove-focus-ui-patch">
      /* Remove Focus Path / Buscar persona UI + Limpiar + botones 1/2/3 */
      (function () {
        function removeFocusUI(root) {
          root = root || document;

          // 1) Inputs con placeholder "Focus Path" o "Buscar persona"
          const inputs = root.querySelectorAll(
            'input[placeholder*="Focus Path" i], input[placeholder*="Buscar persona" i]'
          );

          inputs.forEach((inp) => {
            // 2) Buscar un contenedor razonable para eliminar todo el bloque
            const container =
              inp.closest('.dv-org-search, .org-toolbar, .dv-org-ops, .focus-toolbar, .org-focus-toolbar, .toolbar, .relative, .search, .search-bar, form, div') ||
              inp.parentElement;

            if (container && container.parentElement) {
              container.parentElement.removeChild(container);
            } else if (container) {
              container.remove();
            } else {
              inp.remove();
            }
          });

          // 3) Botón "Limpiar" cercano
          (root.querySelectorAll('button, a') || []).forEach((el) => {
            const txt = (el.textContent || '').trim().toLowerCase();
            if (txt === 'limpiar') {
              const holder = el.closest('.dv-org-search, .org-toolbar, .dv-org-ops, .focus-toolbar, .org-focus-toolbar, .toolbar, [role="search"], form');
              if (holder && holder.parentElement) holder.parentElement.removeChild(holder);
              else el.remove();
            }
          });

          // 4) Grupo de botones "1/2/3" adyacente
          (root.querySelectorAll('button, .btn, a') || []).forEach((btn) => {
            const txt = (btn.textContent || '').trim();
            if (/^[123]$/.test(txt)) {
              const group = btn.parentElement;
              if (group) {
                const labels = Array.from(group.children).map((c) => (c.textContent || '').trim());
                const only123 = labels.length > 0 && labels.every((t) => /^[123]$/.test(t));
                if (only123) {
                  if (group.parentElement) group.parentElement.removeChild(group);
                  else group.remove();
                }
              }
            }
          });
        }

        function run() {
          removeFocusUI(document);
        }

        if (document.readyState !== 'loading') run();
        else document.addEventListener('DOMContentLoaded', run);

        // Observa reinyecciones y vuelve a eliminar
        try {
          const mo = new MutationObserver(() => run());
          mo.observe(document.body, { childList: true, subtree: true });
        } catch (e) {
          // noop
        }
      })();
    </script>





    <script id="ssgg-visual-v13">
      (function () {
        function $(sel, root) { return (root || document).querySelector(sel); }
        function $all(sel, root) { return Array.from((root || document).querySelectorAll(sel)); }
        function findCardByName(container, name) {
          const target = name.toLowerCase();
          const cards = $all('.card', container);
          for (const c of cards) {
            const nm = (c.querySelector('.card-name') || {}).textContent || c.textContent || '';
            const t = nm.trim().toLowerCase();
            if (t === target || t.includes(target)) return c;
          }
          return null;
        }
        function ensureLayer(container) {
          let layer = container.querySelector('.ssgg-aux-layer');
          if (!layer) {
            layer = document.createElement('div');
            layer.className = 'ssgg-aux-layer';
            layer.innerHTML = '<svg></svg>';
            container.appendChild(layer);
          }
          const svg = layer.querySelector('svg');
          while (svg.firstChild) svg.removeChild(svg.firstChild);
          return svg;
        }
        function relRect(container, el) {
          const cr = container.getBoundingClientRect();
          const r = el.getBoundingClientRect(); // respects transforms
          return { left: r.left - cr.left, top: r.top - cr.top, width: r.width, height: r.height, right: r.right - cr.left, bottom: r.bottom - cr.top };
        }
        function drawH(svg, x1, x2, y) {
          const p = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          p.setAttribute('d', `M ${x1} ${y} H ${x2}`);
          p.setAttribute('class', 'ssgg-aux-path');
          svg.appendChild(p);
        }
        function drawV(svg, x, y1, y2) {
          const p = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          p.setAttribute('d', `M ${x} ${y1} V ${y2}`);
          p.setAttribute('class', 'ssgg-aux-path');
          svg.appendChild(p);
        }
        function applyShift(card, dx, dy) {
          if (!card) return;
          card.classList.add('ssgg-shift');
          if (dx != null) card.style.setProperty('--shift-x', (dx | 0) + 'px');
          if (dy != null) card.style.setProperty('--shift-y', (dy | 0) + 'px');
        }
        function clearShift(card) {
          if (!card) return;
          card.classList.remove('ssgg-shift');
          card.style.removeProperty('--shift-x');
          card.style.removeProperty('--shift-y');
        }
        function alignYTo(target, anchor) {
          if (!target || !anchor) return;
          const dy = Math.round(anchor.getBoundingClientRect().top - target.getBoundingClientRect().top);
          if (dy !== 0) applyShift(target, null, dy);
        }
        function centerJuan(container, juan, patricio) {
          if (!juan || !patricio) return;
          const ul = juan.closest('li') && juan.closest('li').parentElement;
          if (!ul) return;
          const ulRect = ul.getBoundingClientRect();
          const pRect = patricio.getBoundingClientRect();
          const jRect = juan.getBoundingClientRect();
          const targetCx = (ulRect.left + (pRect.left + pRect.width / 2)) / 2;
          const juanCx = jRect.left + jRect.width / 2;
          const dx = Math.round(targetCx - juanCx);
          if (Math.abs(dx) > 1) applyShift(juan, dx, null);
        }
        function ensureJonathanNextToNatalia(container, nat) {
          if (!nat) return null;
          const natLI = nat.closest('li'); const parentUL = natLI && natLI.parentElement;
          if (!parentUL) return null;
          let jon = findCardByName(container, 'Jonathan');
          if (jon) {
            const jonLI = jon.closest('li');
            if (jonLI && natLI && natLI.nextSibling !== jonLI) {
              parentUL.insertBefore(jonLI, natLI.nextSibling);
            }
            return jon;
          }
          const li = document.createElement('li');
          li.innerHTML = '<div class="card"><div class="card-name">Jonathan Ferro</div><div class="card-role">Analista de procesos y Analista mantenimiento</div></div>';
          parentUL.insertBefore(li, natLI.nextSibling);
          return li.querySelector('.card');
        }

        let rafId = 0;
        function queueRender() { cancelAnimationFrame(rafId); rafId = requestAnimationFrame(render); }

        function render() {
          const cont = $('#ssgg-chart-container'); if (!cont) return;
          const svg = ensureLayer(cont);

          const roberta = findCardByName(cont, 'Roberta Di Pace') || findCardByName(cont, 'Responsable');
          const patricio = findCardByName(cont, 'Patricio Varela');
          const juan = findCardByName(cont, 'Juan Basini');
          const david = findCardByName(cont, 'David Diaz');
          const natalia = findCardByName(cont, 'Natalia Gonzalez') || findCardByName(cont, 'Natalia');
          const jon = ensureJonathanNextToNatalia(cont, natalia) || findCardByName(cont, 'Jonathan');

          // Reset previous visual offsets to compute fresh
          [natalia, jon, juan].forEach(clearShift);

          // Visual alignments via transforms
          if (david) {
            if (natalia) alignYTo(natalia, david);
            if (jon) alignYTo(jon, david);
          }
          if (juan && patricio) centerJuan(cont, juan, patricio);

          // Draw trunk from Roberta to Natalia/Jonathan
          if (!roberta) return;
          const rr = relRect(cont, roberta);
          const startY = rr.top + rr.height / 2;
          const startX = rr.right;

          const targets = [];
          if (natalia) { const nr = relRect(cont, natalia); targets.push({ x: nr.left + nr.width / 2, y: nr.top }); }
          if (jon) { const jr = relRect(cont, jon); targets.push({ x: jr.left + jr.width / 2, y: jr.top }); }
          if (targets.length) {
            const endX = Math.max(...targets.map(t => t.x));
            drawH(svg, startX, endX, startY);
            targets.forEach(t => drawV(svg, t.x, startY, t.y));
          }
        }

        function addScrollListeners(el) {
          if (!el) return;
          el.addEventListener('scroll', queueRender, { passive: true });
          // attach to ancestors that can scroll
          let p = el.parentElement;
          while (p && p !== document.body) {
            p.addEventListener('scroll', queueRender, { passive: true });
            p = p.parentElement;
          }
        }

        function ready(fn) { if (document.readyState !== 'loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }
        ready(function () {
          const cont = document.getElementById('ssgg-chart-container');
          if (!cont) return;
          const mo = new MutationObserver(() => queueRender());
          mo.observe(cont, { childList: true, subtree: true });
          window.addEventListener('resize', queueRender, { passive: true });
          window.addEventListener('scroll', queueRender, { passive: true });
          document.addEventListener('scroll', queueRender, { passive: true });
          addScrollListeners(cont);

          setTimeout(queueRender, 450);
        });
      })();
    </script>


    <!-- center-juan-patch: keeps native rails fixed and only shifts the card visually -->



    <!-- improved center-juan patch: bias towards Patricio and safe redraw for overlays -->



    <script id="ssgg-center-juan-patch">
      (function () {
        const GAP = 20;          // px: separación deseada entre el borde derecho de Juan y el borde izquierdo de Patricio
        const MAX_RETRIES = 60;
        let tries = 0;

        function $(s, r) { return (r || document).querySelector(s); }
        function $all(s, r) { return Array.from((r || document).querySelectorAll(s)); }

        function findCardByName(name) {
          const needle = (name || '').trim().toLowerCase();
          const nodes = $all('.card, [data-node], .node, .org-node');
          for (const el of nodes) {
            const txt = (el.textContent || '').trim().toLowerCase();
            if (txt.includes(needle)) return el;
          }
          return null;
        }
        function clearShift(el) {
          if (!el) return;
          el.classList.remove('ssgg-shift');
          el.style.removeProperty('--shift-x');
          el.style.removeProperty('--shift-y');
        }
        function shift(el, dx) {
          if (!el) return;
          el.classList.add('ssgg-shift');
          el.style.setProperty('--shift-x', (Math.round(dx) || 0) + 'px');
        }
        function redrawConnectors() {
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              try {
                const cont = $('#ssgg-chart-container') || document;
                cont.dispatchEvent(new Event('ssgg-redraw', { bubbles: true }));
              } catch (e) { }
              try {
                if (window.SSGG && typeof window.SSGG.redraw === 'function') window.SSGG.redraw();
              } catch (e) { }
            });
          });
        }
        function computeAndApply() {
          const juan = findCardByName('juan basini');
          const patri = findCardByName('patricio varela');
          if (!juan || !patri) {
            if (tries++ < MAX_RETRIES) return void setTimeout(computeAndApply, 120);
            return;
          }
          // limpiar desplazamiento previo para medir bien
          clearShift(juan);

          const jr = juan.getBoundingClientRect();
          const pr = patri.getBoundingClientRect();

          // Queremos que el borde derecho de Juan quede GAP px a la izquierda del borde izquierdo de Patricio
          const targetRight = pr.left - GAP;
          const dx = Math.round(targetRight - jr.right);

          if (Math.abs(dx) > 1) shift(juan, dx);
          redrawConnectors();
        }
        function render() {
          requestAnimationFrame(computeAndApply);
        }
        if (document.readyState !== 'loading') render();
        else document.addEventListener('DOMContentLoaded', render);
        window.addEventListener('resize', render);
        window.addEventListener('orientationchange', render);
      })();
    </script>

    <script id="davoo-normalize-criticality">
      (function () {
        const MAP = { "Critico": "Crítico", "critico": "crítico", "Critica": "Crítica", "critica": "crítica" };
        function fixNode(node) {
          const t = node.textContent;
          if (!t) return;
          const replaced = t.replace(/(Critico|critico|Critica|critica)/g, (m) => MAP[m] || m);
          if (replaced !== t) node.textContent = replaced;
        }
        function walk(root) {
          try {
            const tw = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null);
            const nodes = [];
            while (tw.nextNode()) nodes.push(tw.currentNode);
            nodes.forEach(fixNode);
          } catch (e) { }
        }
        function run() { walk(document.body); }
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", run);
        } else { run(); }
        try {
          const mo = new MutationObserver((muts) => {
            muts.forEach((m) => {
              if (m.type === "childList") {
                m.addedNodes && m.addedNodes.forEach((n) => walk(n));
              } else if (m.type === "characterData") {
                fixNode(m.target);
              }
            });
          });
          mo.observe(document.body, { childList: true, subtree: true, characterData: true });
        } catch (e) { }
      })();
    </script>
    <script id="davoo-v6-js">
      /* DAVOO V6r1: sin botón flotante de densidad ni atajo Alt+D; mantiene Tabs ARIA */
      (function () {
        // Roving tabindex para tabs con role="tablist"
        function enhanceTabs() {
          document.querySelectorAll('[role="tablist"]').forEach(tablist => {
            const tabs = Array.from(tablist.querySelectorAll('[role="tab"]'));
            if (!tabs.length) return;
            tabs.forEach(t => t.tabIndex = t.getAttribute('aria-selected') === 'true' ? 0 : -1);
            tablist.addEventListener('keydown', (ev) => {
              const current = document.activeElement;
              if (!tabs.includes(current)) return;
              let i = tabs.indexOf(current);
              if (ev.key === 'ArrowRight') { i = (i + 1) % tabs.length; ev.preventDefault(); tabs[i].focus(); }
              else if (ev.key === 'ArrowLeft') { i = (i - 1 + tabs.length) % tabs.length; ev.preventDefault(); tabs[i].focus(); }
              else if (ev.key === 'Home') { i = 0; ev.preventDefault(); tabs[i].focus(); }
              else if (ev.key === 'End') { i = tabs.length - 1; ev.preventDefault(); tabs[i].focus(); }
            });
            tabs.forEach(t => {
              t.addEventListener('click', () => {
                tabs.forEach(x => { x.setAttribute('aria-selected', 'false'); x.tabIndex = -1; });
                t.setAttribute('aria-selected', 'true'); t.tabIndex = 0; t.focus();
              });
            });
          });
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', function () {
            try { enhanceTabs(); } catch (e) { }
          });
        } else {
          try { enhanceTabs(); } catch (e) { }
        }
      })();
    </script>

    <script id="davoo-hotfix-filters">
      (function () {
        function getValues(data, key) {
          try {
            return data.map(it => {
              if (!it) return null;
              if (it[key] !== undefined) return it[key];
              const low = key.toLowerCase();
              for (const k in it) { if (k && k.toLowerCase() === low) return it[k]; }
              return null;
            }).filter(Boolean);
          } catch (e) { return []; }
        }
        window.populateFilters = function (data) {
          try {
            const provinciaFilter = document.getElementById('provincia-filter');
            const localidadFilter = document.getElementById('localidad-filter');
            if (!provinciaFilter || !localidadFilter) return;
            const provincias = Array.from(new Set(getValues(data, 'Provincia'))).sort();
            const localidades = Array.from(new Set(getValues(data, 'Localidad'))).sort();
            const opt = (v) => `<option value="${String(v).replace(/"/g, '&quot;')}">${v}</option>`;
            provinciaFilter.innerHTML = '<option value="">Todas</option>' + provincias.map(opt).join('');
            localidadFilter.innerHTML = '<option value="">Todas</option>' + localidades.map(opt).join('');
          } catch (e) { console.error('populateFilters hotfix', e); }
        };
      })();
    </script>


    <style id="davoo-orgbar-fix">
      #ssgg-chart-container .org-children::before {
        left: var(--bar-left, 10%);
        width: var(--bar-width, 80%);
      }
    </style>
    <script id="davoo-orgbar-calc">
      (function () {
        function update() {
          const cont = document.querySelector('#ssgg-chart-container .org-node-wrapper > .org-children');
          if (!cont) return;
          const kids = Array.from(cont.children).filter(el => el.classList && el.classList.contains('org-node-wrapper'));
          if (kids.length < 2) return;
          const rect = cont.getBoundingClientRect();
          const c1 = kids[0].getBoundingClientRect().left + kids[0].getBoundingClientRect().width / 2 - rect.left;
          const c2 = kids[kids.length - 1].getBoundingClientRect().left + kids[kids.length - 1].getBoundingClientRect().width / 2 - rect.left;
          const a = Math.min(c1, c2), b = Math.max(c1, c2);
          const left = (a / rect.width) * 100;
          const width = ((b - a) / rect.width) * 100;
          cont.style.setProperty('--bar-left', left + '%');
          cont.style.setProperty('--bar-width', width + '%');
        }
        window.addEventListener('resize', update);
        if ('ResizeObserver' in window) {
          const ro = new ResizeObserver(() => update());
          window.addEventListener('load', () => {
            const cont = document.querySelector('#ssgg-chart-container .org-node-wrapper > .org-children');
            if (cont) ro.observe(cont);
            update();
          });
        } else {
          window.addEventListener('load', update);
        }
      })();
    </script>
>>>>>>> parent of b94f085 (Update index.html)

</body>

</html>